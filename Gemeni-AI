local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local GEMINI_API_KEY = ""
local savedApiKey = ""
local allApiKeys = {}
local currentModelIndex = 1
local currentLanguage = "en"
local currentTheme = "dark"
local isMinimized = false
local isSettingsOpen = false
local isHistoryOpen = false
local chatHistory = {}
local currentChatId = nil
local currentChatMessages = {}
local chatFrameRef = nil
local statusLabelRef = nil
local inputBoxRef = nil
local mainFrameRef = nil
local isOpen = false
local isMainGuiLaunched = false
local contentContainerRef = nil

local MODELS = {}
MODELS[1] = {name = "Gemini 3 Pro", id = "models/gemini-3-pro-preview"}
MODELS[2] = {name = "Deep Research Pro", id = "models/deep-research-pro-preview-12-2025"}
MODELS[3] = {name = "Gemini 2.5 Pro", id = "models/gemini-2.5-pro"}
MODELS[4] = {name = "Gemini Pro Latest", id = "models/gemini-pro-latest"}
MODELS[5] = {name = "Gemini 3 Flash", id = "models/gemini-3-flash-preview"}
MODELS[6] = {name = "Gemini 2.5 Flash", id = "models/gemini-2.5-flash"}
MODELS[7] = {name = "Gemini 2.5 Flash Preview", id = "models/gemini-2.5-flash-preview-09-2025"}
MODELS[8] = {name = "Gemini 2.5 Flash Lite", id = "models/gemini-2.5-flash-lite"}
MODELS[9] = {name = "Gemini 2.5 Flash Lite Preview", id = "models/gemini-2.5-flash-lite-preview-09-2025"}
MODELS[10] = {name = "Gemini Flash Latest", id = "models/gemini-flash-latest"}
MODELS[11] = {name = "Gemini 2.0 Flash", id = "models/gemini-2.0-flash"}
MODELS[12] = {name = "Gemini 2.0 Flash 001", id = "models/gemini-2.0-flash-001"}
MODELS[13] = {name = "Gemini Flash Lite Latest", id = "models/gemini-flash-lite-latest"}
MODELS[14] = {name = "Gemini 2.0 Flash Lite", id = "models/gemini-2.0-flash-lite"}
MODELS[15] = {name = "Gemini 2.0 Flash Lite 001", id = "models/gemini-2.0-flash-lite-001"}
MODELS[16] = {name = "Gemini Exp 1206", id = "models/gemini-exp-1206"}
MODELS[17] = {name = "Nano Banana Pro", id = "models/nano-banana-pro-preview"}
MODELS[18] = {name = "Gemma 3 27B", id = "models/gemma-3-27b-it"}
MODELS[19] = {name = "Gemma 3 12B", id = "models/gemma-3-12b-it"}
MODELS[20] = {name = "Gemma 3 4B", id = "models/gemma-3-4b-it"}
MODELS[21] = {name = "Gemma 3 1B", id = "models/gemma-3-1b-it"}
MODELS[22] = {name = "Gemma 3N E4B", id = "models/gemma-3n-e4b-it"}
MODELS[23] = {name = "Gemma 3N E2B", id = "models/gemma-3n-e2b-it"}

local LANGUAGES = {}
LANGUAGES[1] = {code = "en", name = "English"}
LANGUAGES[2] = {code = "ru", name = "–†—É—Å—Å–∫–∏–π"}
LANGUAGES[3] = {code = "uk", name = "–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞"}
LANGUAGES[4] = {code = "pt", name = "Portugu√™s"}
LANGUAGES[5] = {code = "id", name = "Indonesian"}
LANGUAGES[6] = {code = "ja", name = "Êó•Êú¨Ë™û"}
LANGUAGES[7] = {code = "tr", name = "T√ºrk√ße"}
LANGUAGES[8] = {code = "ar", name = "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"}
LANGUAGES[9] = {code = "es", name = "Espa√±ol"}
LANGUAGES[10] = {code = "fr", name = "Fran√ßais"}

local T = {}
T["en"] = {title="Gemini AI Assistant",status="‚óÜ %s - ACTIVE",placeholder="Ask Gemini something...",thinking="Gemini is thinking...",welcome="Hello! I am %s!\n\nAPI key activated\nReady to work\n\nWhat I can do:\n- Answer any questions\n- Help with code\n- Write texts\n- Solve math\n- Give advice\n\nAsk me anything!",copy="Copy",copied="Copied!",settings="Settings",back="Back",theme="Theme",language="Language",dark="Dark",light="Light",closeConfirm="Are you sure you want to close the GUI?",yes="Yes",no="No",limitReached="Rate limit for %s. Switching to %s",apiError="API Error: %s",unexpectedFormat="Unexpected response format",copiedNotif="Text copied!",by="by:romokaso",history="Chat History",newChat="New Chat",noHistory="No chat history yet",enterApiKey="Enter your Gemini API Key",confirm="Confirm",howToGetKey="How to get key",apiKeyInvalid="Invalid API key.",apiKeyValid="API key verified!",checking="Checking...",apiKeyTitle="Gemini API Key",instruction="How to get API Key",step1title="Step 1: Open Google AI Studio",step1desc="Click the button below to copy the link, then open it in your browser.",step2title="Step 2: Sign In",step2desc="Sign in with your Google account.",step3title="Step 3: Create API Key",step3desc="Click 'Create API Key' button on the page.",step4title="Step 4: Select Project",step4desc="Choose any project or create a new one.",step5title="Step 5: Copy and Paste",step5desc="Copy your API key, paste it in the field and click Confirm!",copyLink="Copy Link",rename="Rename Chat",renamePlace="Enter new name...",renameDone="Done",apiKeys="API Keys",currentKey="Current Key",deleteKey="Delete",changeKey="Change Key",addKey="Add Key",you="You",closeApiConfirm="Are you sure you want to close the GUI?",addApiKey="Add new API key",savedKeys="Saved Keys",modelSelect="Select Model",close="Close"}
T["ru"] = {title="Gemini AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç",status="‚óÜ %s - –ê–ö–¢–ò–í–ï–ù",placeholder="–°–ø—Ä–æ—Å–∏—Ç–µ Gemini...",thinking="Gemini –¥—É–º–∞–µ—Ç...",welcome="–ü—Ä–∏–≤–µ—Ç! –Ø %s!\n\nAPI –∫–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω\n–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ\n\n–ß—Ç–æ —è —É–º–µ—é:\n- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã\n- –ü–æ–º–æ–≥–∞—Ç—å —Å –∫–æ–¥–æ–º\n- –ü–∏—Å–∞—Ç—å —Ç–µ–∫—Å—Ç—ã\n- –†–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏\n- –î–∞–≤–∞—Ç—å —Å–æ–≤–µ—Ç—ã\n\n–ó–∞–¥–∞–π—Ç–µ –º–Ω–µ –≤–æ–ø—Ä–æ—Å!",copy="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",copied="–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!",settings="–ù–∞—Å—Ç—Ä–æ–π–∫–∏",back="–ù–∞–∑–∞–¥",theme="–¢–µ–º–∞",language="–Ø–∑—ã–∫",dark="–¢—ë–º–Ω–∞—è",light="–°–≤–µ—Ç–ª–∞—è",closeConfirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å GUI?",yes="–î–∞",no="–ù–µ—Ç",limitReached="–õ–∏–º–∏—Ç –¥–ª—è %s. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ %s",apiError="–û—à–∏–±–∫–∞ API: %s",unexpectedFormat="–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞",copiedNotif="–¢–µ–∫—Å—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!",by="by:romokaso",history="–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤",newChat="–ù–æ–≤—ã–π —á–∞—Ç",noHistory="–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞",enterApiKey="–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á Gemini",confirm="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å",howToGetKey="–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á",apiKeyInvalid="–ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á.",apiKeyValid="API –∫–ª—é—á –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω!",checking="–ü—Ä–æ–≤–µ—Ä–∫–∞...",apiKeyTitle="API –∫–ª—é—á Gemini",instruction="–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á",step1title="–®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ Google AI Studio",step1desc="–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.",step2title="–®–∞–≥ 2: –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç",step2desc="–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google –∞–∫–∫–∞—É–Ω—Ç.",step3title="–®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á",step3desc="–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É 'Create API Key'.",step4title="–®–∞–≥ 4: –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç",step4desc="–í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π.",step5title="–®–∞–≥ 5: –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ",step5desc="–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á, –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ –∏ –Ω–∞–∂–º–∏—Ç–µ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å!",copyLink="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É",rename="–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å",renamePlace="–ù–æ–≤–æ–µ –∏–º—è...",renameDone="–ì–æ—Ç–æ–≤–æ",apiKeys="API –∫–ª—é—á–∏",currentKey="–¢–µ–∫—É—â–∏–π –∫–ª—é—á",deleteKey="–£–¥–∞–ª–∏—Ç—å",changeKey="–°–º–µ–Ω–∏—Ç—å –∫–ª—é—á",addKey="–î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á",you="–í—ã",closeApiConfirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å GUI?",addApiKey="–î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á",savedKeys="–°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∫–ª—é—á–∏",modelSelect="–í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏",close="–ó–∞–∫—Ä—ã—Ç—å"}
T["uk"] = {title="Gemini AI –ê—Å–∏—Å—Ç–µ–Ω—Ç",status="‚óÜ %s - –ê–ö–¢–ò–í–ù–ò–ô",placeholder="–ó–∞–ø–∏—Ç–∞–π—Ç–µ Gemini...",thinking="Gemini –¥—É–º–∞—î...",welcome="–ü—Ä–∏–≤—ñ—Ç! –Ø %s!\n\nAPI –∫–ª—é—á –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ\n–ì–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–±–æ—Ç–∏\n\n–©–æ —è –≤–º—ñ—é:\n- –í—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è\n- –î–æ–ø–æ–º–∞–≥–∞—Ç–∏ –∑ –∫–æ–¥–æ–º\n- –ü–∏—Å–∞—Ç–∏ —Ç–µ–∫—Å—Ç–∏\n- –†–æ–∑–≤'—è–∑—É–≤–∞—Ç–∏ –∑–∞–¥–∞—á—ñ\n- –î–∞–≤–∞—Ç–∏ –ø–æ—Ä–∞–¥–∏\n\n–ó–∞–¥–∞–π—Ç–µ –º–µ–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è!",copy="–ö–æ–ø—ñ—é–≤–∞—Ç–∏",copied="–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!",settings="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",back="–ù–∞–∑–∞–¥",theme="–¢–µ–º–∞",language="–ú–æ–≤–∞",dark="–¢–µ–º–Ω–∞",light="–°–≤—ñ—Ç–ª–∞",closeConfirm="–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ —â–æ —Ö–æ—á–µ—Ç–µ –∑–∞–∫—Ä–∏—Ç–∏ GUI?",yes="–¢–∞–∫",no="–ù—ñ",limitReached="–õ—ñ–º—ñ—Ç –¥–ª—è %s. –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –Ω–∞ %s",apiError="–ü–æ–º–∏–ª–∫–∞ API: %s",unexpectedFormat="–ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ",copiedNotif="–¢–µ–∫—Å—Ç —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!",by="by:romokaso",history="–Ü—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—ñ–≤",newChat="–ù–æ–≤–∏–π —á–∞—Ç",noHistory="–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ—Ä–æ–∂–Ω—è",enterApiKey="–í–≤–µ–¥—ñ—Ç—å API –∫–ª—é—á Gemini",confirm="–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏",howToGetKey="–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∫–ª—é—á",apiKeyInvalid="–ù–µ–≤—ñ—Ä–Ω–∏–π API –∫–ª—é—á.",apiKeyValid="API –∫–ª—é—á –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ!",checking="–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞...",apiKeyTitle="API –∫–ª—é—á Gemini",instruction="–Ø–∫ –æ—Ç—Ä–∏–º–∞—Ç–∏ API –∫–ª—é—á",step1title="–ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏–π—Ç–µ Google AI Studio",step1desc="–°–∫–æ–ø—ñ—é–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —ñ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.",step2title="–ö—Ä–æ–∫ 2: –£–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç",step2desc="–£–≤—ñ–π–¥—ñ—Ç—å —á–µ—Ä–µ–∑ Google –∞–∫–∞—É–Ω—Ç.",step3title="–ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä—ñ—Ç—å API –∫–ª—é—á",step3desc="–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É 'Create API Key'.",step4title="–ö—Ä–æ–∫ 4: –û–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–µ–∫—Ç",step4desc="–û–±–µ—Ä—ñ—Ç—å –±—É–¥—å-—è–∫–∏–π –ø—Ä–æ–µ–∫—Ç –∞–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π.",step5title="–ö—Ä–æ–∫ 5: –°–∫–æ–ø—ñ—é–π—Ç–µ —ñ –≤—Å—Ç–∞–≤—Ç–µ",step5desc="–°–∫–æ–ø—ñ—é–π—Ç–µ –∫–ª—é—á —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏!",copyLink="–ö–æ–ø—ñ—é–≤–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è",rename="–ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏",renamePlace="–ù–æ–≤–µ —ñ–º'—è...",renameDone="–ì–æ—Ç–æ–≤–æ",apiKeys="API –∫–ª—é—á—ñ",currentKey="–ü–æ—Ç–æ—á–Ω–∏–π –∫–ª—é—á",deleteKey="–í–∏–¥–∞–ª–∏—Ç–∏",changeKey="–ó–º—ñ–Ω–∏—Ç–∏ –∫–ª—é—á",addKey="–î–æ–¥–∞—Ç–∏ –∫–ª—é—á",you="–í–∏",closeApiConfirm="–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ —â–æ —Ö–æ—á–µ—Ç–µ –∑–∞–∫—Ä–∏—Ç–∏ GUI?",addApiKey="–î–æ–¥–∞—Ç–∏ API –∫–ª—é—á",savedKeys="–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∫–ª—é—á—ñ",modelSelect="–í–∏–±—ñ—Ä –º–æ–¥–µ–ª—ñ",close="–ó–∞–∫—Ä–∏—Ç–∏"}
T["pt"] = {title="Assistente Gemini AI",status="‚óÜ %s - ATIVO",placeholder="Pergunte ao Gemini...",thinking="Gemini est√° pensando...",welcome="Ol√°! Sou %s!\n\nChave API ativada\nPronto!\n\nO que posso fazer:\n- Responder perguntas\n- Ajudar com c√≥digo\n- Escrever textos\n- Resolver matem√°tica\n- Dar conselhos\n\nPergunte qualquer coisa!",copy="Copiar",copied="Copiado!",settings="Configura√ß√µes",back="Voltar",theme="Tema",language="Idioma",dark="Escuro",light="Claro",closeConfirm="Tem certeza que deseja fechar o GUI?",yes="Sim",no="N√£o",limitReached="Limite para %s. Mudando para %s",apiError="Erro API: %s",unexpectedFormat="Formato inesperado",copiedNotif="Texto copiado!",by="by:romokaso",history="Hist√≥rico",newChat="Novo Chat",noHistory="Sem hist√≥rico",enterApiKey="Digite sua chave API Gemini",confirm="Confirmar",howToGetKey="Como obter chave",apiKeyInvalid="Chave inv√°lida.",apiKeyValid="Chave verificada!",checking="Verificando...",apiKeyTitle="Chave API Gemini",instruction="Como obter chave API",step1title="Passo 1: Abra Google AI Studio",step1desc="Copie o link e abra no navegador.",step2title="Passo 2: Fa√ßa Login",step2desc="Entre com sua conta Google.",step3title="Passo 3: Crie a chave",step3desc="Clique em 'Create API Key'.",step4title="Passo 4: Selecione projeto",step4desc="Escolha ou crie um projeto.",step5title="Passo 5: Copie e cole",step5desc="Copie a chave e clique Confirmar!",copyLink="Copiar Link",rename="Renomear",renamePlace="Novo nome...",renameDone="Feito",apiKeys="Chaves API",currentKey="Chave atual",deleteKey="Excluir",changeKey="Trocar chave",addKey="Adicionar",you="Voc√™",closeApiConfirm="Tem certeza que deseja fechar o GUI?",addApiKey="Nova chave API",savedKeys="Chaves salvas",modelSelect="Selecionar Modelo",close="Fechar"}
T["id"] = {title="Asisten Gemini AI",status="‚óÜ %s - AKTIF",placeholder="Tanya Gemini...",thinking="Gemini sedang berpikir...",welcome="Halo! Saya %s!\n\nKunci API aktif\nSiap bekerja!\n\nYang bisa saya lakukan:\n- Menjawab pertanyaan\n- Membantu kode\n- Menulis teks\n- Menyelesaikan matematika\n- Memberi saran\n\nTanyakan apa saja!",copy="Salin",copied="Disalin!",settings="Pengaturan",back="Kembali",theme="Tema",language="Bahasa",dark="Gelap",light="Terang",closeConfirm="Yakin ingin menutup GUI?",yes="Ya",no="Tidak",limitReached="Batas untuk %s. Beralih ke %s",apiError="Error API: %s",unexpectedFormat="Format tidak terduga",copiedNotif="Teks disalin!",by="by:romokaso",history="Riwayat Chat",newChat="Chat Baru",noHistory="Belum ada riwayat",enterApiKey="Masukkan Kunci API Gemini",confirm="Konfirmasi",howToGetKey="Cara mendapatkan",apiKeyInvalid="Kunci tidak valid.",apiKeyValid="Kunci terverifikasi!",checking="Memeriksa...",apiKeyTitle="Kunci API Gemini",instruction="Cara mendapatkan Kunci API",step1title="Langkah 1: Buka Google AI Studio",step1desc="Salin link dan buka di browser.",step2title="Langkah 2: Masuk",step2desc="Masuk dengan akun Google.",step3title="Langkah 3: Buat Kunci",step3desc="Klik tombol 'Create API Key'.",step4title="Langkah 4: Pilih Proyek",step4desc="Pilih atau buat proyek baru.",step5title="Langkah 5: Salin dan Tempel",step5desc="Salin kunci dan klik Konfirmasi!",copyLink="Salin Link",rename="Ganti Nama",renamePlace="Nama baru...",renameDone="Selesai",apiKeys="Kunci API",currentKey="Kunci aktif",deleteKey="Hapus",changeKey="Ganti Kunci",addKey="Tambah",you="Anda",closeApiConfirm="Yakin ingin menutup GUI?",addApiKey="Tambah kunci API",savedKeys="Kunci tersimpan",modelSelect="Pilih Model",close="Tutup"}
T["ja"] = {title="Gemini AI „Ç¢„Ç∑„Çπ„Çø„É≥„Éà",status="‚óÜ %s - „Ç¢„ÇØ„ÉÜ„Ç£„Éñ",placeholder="Gemini„Å´Ë≥™Âïè...",thinking="Gemini„ÅåËÄÉ„Åà„Å¶„ÅÑ„Åæ„Åô...",welcome="„Åì„Çì„Å´„Å°„ÅØÔºÅ%s„Åß„ÅôÔºÅ\n\nAPI„Ç≠„Éº„ÅåÊúâÂäπ„Åß„Åô\nÊ∫ñÂÇôÂÆå‰∫Ü\n\n„Åß„Åç„Çã„Åì„Å®Ôºö\n- Ë≥™Âïè„Å´ÂõûÁ≠î\n- „Ç≥„Éº„Éâ„ÅÆÊîØÊè¥\n- „ÉÜ„Ç≠„Çπ„Éà‰ΩúÊàê\n- Êï∞Â≠¶„ÅÆËß£Ê±∫\n- „Ç¢„Éâ„Éê„Ç§„Çπ\n\n‰Ωï„Åß„ÇÇËÅû„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",copy="„Ç≥„Éî„Éº",copied="„Ç≥„Éî„ÉºÊ∏à„ÅøÔºÅ",settings="Ë®≠ÂÆö",back="Êàª„Çã",theme="„ÉÜ„Éº„Éû",language="Ë®ÄË™û",dark="„ÉÄ„Éº„ÇØ",light="„É©„Ç§„Éà",closeConfirm="GUI„ÇíÈñâ„Åò„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü",yes="„ÅØ„ÅÑ",no="„ÅÑ„ÅÑ„Åà",limitReached="%s„ÅÆÂà∂Èôê„ÄÇ%s„Å´Âàá„ÇäÊõø„Åà",apiError="API„Ç®„É©„Éº: %s",unexpectedFormat="‰∫àÊúü„Åó„Å™„ÅÑÂΩ¢Âºè",copiedNotif="„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ",by="by:romokaso",history="„ÉÅ„É£„ÉÉ„ÉàÂ±•Ê≠¥",newChat="Êñ∞„Åó„ÅÑ„ÉÅ„É£„ÉÉ„Éà",noHistory="Â±•Ê≠¥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì",enterApiKey="Gemini API„Ç≠„Éº„ÇíÂÖ•Âäõ",confirm="Á¢∫Ë™ç",howToGetKey="„Ç≠„Éº„ÅÆÂèñÂæóÊñπÊ≥ï",apiKeyInvalid="ÁÑ°Âäπ„Å™API„Ç≠„Éº",apiKeyValid="API„Ç≠„ÉºÁ¢∫Ë™çÊ∏à„ÅøÔºÅ",checking="Á¢∫Ë™ç‰∏≠...",apiKeyTitle="Gemini API„Ç≠„Éº",instruction="API„Ç≠„Éº„ÅÆÂèñÂæóÊñπÊ≥ï",step1title="„Çπ„ÉÜ„ÉÉ„Éó1: Google AI Studio„ÇíÈñã„Åè",step1desc="„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº„Åó„Å¶„Éñ„É©„Ç¶„Ç∂„ÅßÈñã„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",step2title="„Çπ„ÉÜ„ÉÉ„Éó2: „É≠„Ç∞„Ç§„É≥",step2desc="Google„Ç¢„Ç´„Ç¶„É≥„Éà„Åß„É≠„Ç∞„Ç§„É≥„ÄÇ",step3title="„Çπ„ÉÜ„ÉÉ„Éó3: API„Ç≠„Éº„Çí‰ΩúÊàê",step3desc="'Create API Key'„Çí„ÇØ„É™„ÉÉ„ÇØ„ÄÇ",step4title="„Çπ„ÉÜ„ÉÉ„Éó4: „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÈÅ∏Êäû",step4desc="„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíÈÅ∏Êäû„Åæ„Åü„ÅØ‰ΩúÊàê„ÄÇ",step5title="„Çπ„ÉÜ„ÉÉ„Éó5: „Ç≥„Éî„Éº„Åó„Å¶Ë≤º„Çä‰ªò„Åë",step5desc="„Ç≠„Éº„Çí„Ç≥„Éî„Éº„Åó„Å¶Á¢∫Ë™ç„Çí„ÇØ„É™„ÉÉ„ÇØÔºÅ",copyLink="„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº",rename="ÂêçÂâçÂ§âÊõ¥",renamePlace="Êñ∞„Åó„ÅÑÂêçÂâç...",renameDone="ÂÆå‰∫Ü",apiKeys="API„Ç≠„Éº",currentKey="ÁèæÂú®„ÅÆ„Ç≠„Éº",deleteKey="ÂâäÈô§",changeKey="„Ç≠„ÉºÂ§âÊõ¥",addKey="ËøΩÂä†",you="„ÅÇ„Å™„Åü",closeApiConfirm="GUI„ÇíÈñâ„Åò„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü",addApiKey="API„Ç≠„Éº„ÇíËøΩÂä†",savedKeys="‰øùÂ≠òÊ∏à„Åø„Ç≠„Éº",modelSelect="„É¢„Éá„É´ÈÅ∏Êäû",close="Èñâ„Åò„Çã"}
T["tr"] = {title="Gemini AI Asistan",status="‚óÜ %s - AKTƒ∞F",placeholder="Gemini'ye sorun...",thinking="Gemini d√º≈ü√ºn√ºyor...",welcome="Merhaba! Ben %s!\n\nAPI anahtarƒ± aktif\nHazƒ±rƒ±m!\n\nNeler yapabilirim:\n- Sorularƒ± cevaplama\n- Kodla yardƒ±m\n- Metin yazma\n- Matematik √ß√∂zme\n- Tavsiye verme\n\nBana sorun!",copy="Kopyala",copied="Kopyalandƒ±!",settings="Ayarlar",back="Geri",theme="Tema",language="Dil",dark="Karanlƒ±k",light="Aydƒ±nlƒ±k",closeConfirm="GUI'yi kapatmak istediƒüinizden emin misiniz?",yes="Evet",no="Hayƒ±r",limitReached="%s i√ßin limit. %s'e ge√ßi≈ü",apiError="API Hatasƒ±: %s",unexpectedFormat="Beklenmeyen format",copiedNotif="Metin kopyalandƒ±!",by="by:romokaso",history="Sohbet Ge√ßmi≈üi",newChat="Yeni Sohbet",noHistory="Ge√ßmi≈ü yok",enterApiKey="Gemini API anahtarƒ±nƒ± girin",confirm="Onayla",howToGetKey="Nasƒ±l alƒ±nƒ±r",apiKeyInvalid="Ge√ßersiz anahtar.",apiKeyValid="Anahtar doƒürulandƒ±!",checking="Kontrol ediliyor...",apiKeyTitle="Gemini API Anahtarƒ±",instruction="API Anahtarƒ± nasƒ±l alƒ±nƒ±r",step1title="Adƒ±m 1: Google AI Studio'yu a√ßƒ±n",step1desc="Linki kopyalayƒ±n ve tarayƒ±cƒ±da a√ßƒ±n.",step2title="Adƒ±m 2: Giri≈ü yapƒ±n",step2desc="Google hesabƒ±yla giri≈ü yapƒ±n.",step3title="Adƒ±m 3: Anahtar olu≈üturun",step3desc="'Create API Key' butonuna tƒ±klayƒ±n.",step4title="Adƒ±m 4: Proje se√ßin",step4desc="Bir proje se√ßin veya yeni olu≈üturun.",step5title="Adƒ±m 5: Kopyalayƒ±n",step5desc="Anahtarƒ± kopyalayƒ±n ve Onayla'ya tƒ±klayƒ±n!",copyLink="Link Kopyala",rename="Yeniden Adlandƒ±r",renamePlace="Yeni ad...",renameDone="Tamam",apiKeys="API Anahtarlarƒ±",currentKey="Mevcut anahtar",deleteKey="Sil",changeKey="Anahtarƒ± Deƒüi≈ütir",addKey="Ekle",you="Sen",closeApiConfirm="GUI'yi kapatmak istediƒüinizden emin misiniz?",addApiKey="Yeni anahtar ekle",savedKeys="Kayƒ±tlƒ± anahtarlar",modelSelect="Model Se√ß",close="Kapat"}
T["ar"] = {title="ŸÖÿ≥ÿßÿπÿØ Gemini AI",status="‚óÜ %s - ŸÜÿ¥ÿ∑",placeholder="ÿßÿ≥ÿ£ŸÑ Gemini ÿ¥Ÿäÿ¶ÿßŸã...",thinking="Gemini ŸäŸÅŸÉÿ±...",welcome="ŸÖÿ±ÿ≠ÿ®ÿßŸã! ÿ£ŸÜÿß %s!\n\nŸÖŸÅÿ™ÿßÿ≠ API ŸÖŸÅÿπŸëŸÑ\nÿ¨ÿßŸáÿ≤ ŸÑŸÑÿπŸÖŸÑ\n\nŸÖÿß ÿ£ÿ≥ÿ™ÿ∑Ÿäÿπ ŸÅÿπŸÑŸá:\n- ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©\n- ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ©\n- ŸÉÿ™ÿßÿ®ÿ© ÿßŸÑŸÜÿµŸàÿµ\n- ÿ≠ŸÑ ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿßÿ™\n- ÿ™ŸÇÿØŸäŸÖ ÿßŸÑŸÜÿµÿßÿ¶ÿ≠\n\nÿßÿ≥ÿ£ŸÑŸÜŸä ÿ£Ÿä ÿ¥Ÿäÿ°!",copy="ŸÜÿ≥ÿÆ",copied="ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!",settings="ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™",back="ÿ±ÿ¨Ÿàÿπ",theme="ÿßŸÑÿ≥ŸÖÿ©",language="ÿßŸÑŸÑÿ∫ÿ©",dark="ÿØÿßŸÉŸÜ",light="ŸÅÿßÿ™ÿ≠",closeConfirm="ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸàÿßÿ¨Ÿáÿ©ÿü",yes="ŸÜÿπŸÖ",no="ŸÑÿß",limitReached="ÿ≠ÿØ %s. ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ %s",apiError="ÿÆÿ∑ÿ£ API: %s",unexpectedFormat="ÿ™ŸÜÿ≥ŸäŸÇ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ",copiedNotif="ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÜÿµ!",by="by:romokaso",history="ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿßÿ™",newChat="ŸÖÿ≠ÿßÿØÿ´ÿ© ÿ¨ÿØŸäÿØÿ©",noHistory="ŸÑÿß ŸäŸàÿ¨ÿØ ÿ≥ÿ¨ŸÑ",enterApiKey="ÿ£ÿØÿÆŸÑ ŸÖŸÅÿ™ÿßÿ≠ API",confirm="ÿ™ÿ£ŸÉŸäÿØ",howToGetKey="ŸÉŸäŸÅŸäÿ© ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠",apiKeyInvalid="ŸÖŸÅÿ™ÿßÿ≠ ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠.",apiKeyValid="ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ!",checking="ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÇŸÇ...",apiKeyTitle="ŸÖŸÅÿ™ÿßÿ≠ API Gemini",instruction="ŸÉŸäŸÅŸäÿ© ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖŸÅÿ™ÿßÿ≠ API",step1title="ÿßŸÑÿÆÿ∑Ÿàÿ© 1: ÿßŸÅÿ™ÿ≠ Google AI Studio",step1desc="ÿßŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸàÿßŸÅÿ™ÿ≠Ÿá ŸÅŸä ÿßŸÑŸÖÿ™ÿµŸÅÿ≠.",step2title="ÿßŸÑÿÆÿ∑Ÿàÿ© 2: ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",step2desc="ÿ≥ÿ¨ŸëŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ÿ≠ÿ≥ÿßÿ® Google.",step3title="ÿßŸÑÿÆÿ∑Ÿàÿ© 3: ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÅÿ™ÿßÿ≠",step3desc="ÿßŸÜŸÇÿ± ÿπŸÑŸâ 'Create API Key'.",step4title="ÿßŸÑÿÆÿ∑Ÿàÿ© 4: ÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ",step4desc="ÿßÿÆÿ™ÿ± ŸÖÿ¥ÿ±ŸàÿπÿßŸã ÿ£Ÿà ÿ£ŸÜÿ¥ÿ¶ ÿ¨ÿØŸäÿØÿßŸã.",step5title="ÿßŸÑÿÆÿ∑Ÿàÿ© 5: ÿßŸÜÿ≥ÿÆ ŸàÿßŸÑÿµŸÇ",step5desc="ÿßŸÜÿ≥ÿÆ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ŸàÿßŸÜŸÇÿ± ÿ™ÿ£ŸÉŸäÿØ!",copyLink="ŸÜÿ≥ÿÆ ÿßŸÑÿ±ÿßÿ®ÿ∑",rename="ÿ•ÿπÿßÿØÿ© ÿ™ÿ≥ŸÖŸäÿ©",renamePlace="ÿßÿ≥ŸÖ ÿ¨ÿØŸäÿØ...",renameDone="ÿ™ŸÖ",apiKeys="ŸÖŸÅÿßÿ™Ÿäÿ≠ API",currentKey="ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑÿ≠ÿßŸÑŸä",deleteKey="ÿ≠ÿ∞ŸÅ",changeKey="ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÖŸÅÿ™ÿßÿ≠",addKey="ÿ•ÿ∂ÿßŸÅÿ©",you="ÿ£ŸÜÿ™",closeApiConfirm="ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ∫ŸÑÿßŸÇ ÿßŸÑŸàÿßÿ¨Ÿáÿ©ÿü",addApiKey="ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÅÿ™ÿßÿ≠ API",savedKeys="ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠ ÿßŸÑŸÖÿ≠ŸÅŸàÿ∏ÿ©",modelSelect="ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨",close="ÿ•ÿ∫ŸÑÿßŸÇ"}
T["es"] = {title="Asistente Gemini AI",status="‚óÜ %s - ACTIVO",placeholder="Pregunta a Gemini...",thinking="Gemini est√° pensando...",welcome="¬°Hola! Soy %s!\n\nClave API activada\n¬°Listo!\n\nLo que puedo hacer:\n- Responder preguntas\n- Ayudar con c√≥digo\n- Escribir textos\n- Resolver matem√°ticas\n- Dar consejos\n\n¬°Preg√∫ntame!",copy="Copiar",copied="¬°Copiado!",settings="Ajustes",back="Volver",theme="Tema",language="Idioma",dark="Oscuro",light="Claro",closeConfirm="¬øSeguro que quieres cerrar el GUI?",yes="S√≠",no="No",limitReached="L√≠mite para %s. Cambiando a %s",apiError="Error API: %s",unexpectedFormat="Formato inesperado",copiedNotif="¬°Texto copiado!",by="by:romokaso",history="Historial",newChat="Nuevo Chat",noHistory="Sin historial",enterApiKey="Ingrese su clave API",confirm="Confirmar",howToGetKey="C√≥mo obtener clave",apiKeyInvalid="Clave inv√°lida.",apiKeyValid="¬°Clave verificada!",checking="Verificando...",apiKeyTitle="Clave API Gemini",instruction="C√≥mo obtener clave API",step1title="Paso 1: Abra Google AI Studio",step1desc="Copie el enlace y √°bralo.",step2title="Paso 2: Iniciar sesi√≥n",step2desc="Inicie sesi√≥n con Google.",step3title="Paso 3: Crear clave",step3desc="Haga clic en 'Create API Key'.",step4title="Paso 4: Seleccionar proyecto",step4desc="Elija o cree un proyecto.",step5title="Paso 5: Copiar y pegar",step5desc="Copie la clave y confirme!",copyLink="Copiar Link",rename="Renombrar",renamePlace="Nuevo nombre...",renameDone="Listo",apiKeys="Claves API",currentKey="Clave actual",deleteKey="Eliminar",changeKey="Cambiar clave",addKey="Agregar",you="T√∫",closeApiConfirm="¬øSeguro que quieres cerrar el GUI?",addApiKey="Nueva clave API",savedKeys="Claves guardadas",modelSelect="Seleccionar Modelo",close="Cerrar"}
T["fr"] = {title="Assistant Gemini AI",status="‚óÜ %s - ACTIF",placeholder="Demandez √† Gemini...",thinking="Gemini r√©fl√©chit...",welcome="Bonjour! Je suis %s!\n\nCl√© API activ√©e\nPr√™t!\n\nCe que je peux faire:\n- R√©pondre aux questions\n- Aider avec le code\n- √âcrire des textes\n- R√©soudre les maths\n- Donner des conseils\n\nDemandez-moi!",copy="Copier",copied="Copi√©!",settings="Param√®tres",back="Retour",theme="Th√®me",language="Langue",dark="Sombre",light="Clair",closeConfirm="Voulez-vous vraiment fermer le GUI?",yes="Oui",no="Non",limitReached="Limite pour %s. Passage √† %s",apiError="Erreur API: %s",unexpectedFormat="Format inattendu",copiedNotif="Texte copi√©!",by="by:romokaso",history="Historique",newChat="Nouveau Chat",noHistory="Pas d'historique",enterApiKey="Entrez votre cl√© API",confirm="Confirmer",howToGetKey="Comment obtenir la cl√©",apiKeyInvalid="Cl√© invalide.",apiKeyValid="Cl√© v√©rifi√©e!",checking="V√©rification...",apiKeyTitle="Cl√© API Gemini",instruction="Comment obtenir une cl√© API",step1title="√âtape 1: Ouvrez Google AI Studio",step1desc="Copiez le lien et ouvrez-le.",step2title="√âtape 2: Connexion",step2desc="Connectez-vous avec Google.",step3title="√âtape 3: Cr√©er la cl√©",step3desc="Cliquez sur 'Create API Key'.",step4title="√âtape 4: S√©lectionner le projet",step4desc="Choisissez ou cr√©ez un projet.",step5title="√âtape 5: Copier et coller",step5desc="Copiez la cl√© et confirmez!",copyLink="Copier le Lien",rename="Renommer",renamePlace="Nouveau nom...",renameDone="Fait",apiKeys="Cl√©s API",currentKey="Cl√© actuelle",deleteKey="Supprimer",changeKey="Changer la cl√©",addKey="Ajouter",you="Vous",closeApiConfirm="Voulez-vous vraiment fermer le GUI?",addApiKey="Nouvelle cl√© API",savedKeys="Cl√©s enregistr√©es",modelSelect="S√©lectionner Mod√®le",close="Fermer"}

local THEMES = {}
THEMES["dark"] = {main=Color3.fromRGB(18,18,28),header=Color3.fromRGB(28,28,42),chat=Color3.fromRGB(22,22,34),input=Color3.fromRGB(32,32,48),userMsg=Color3.fromRGB(50,50,75),aiMsg=Color3.fromRGB(38,38,58),status=Color3.fromRGB(26,26,38),button=Color3.fromRGB(42,42,62),text=Color3.fromRGB(240,240,255),accent=Color3.fromRGB(88,101,242),subtext=Color3.fromRGB(140,140,170),hover=Color3.fromRGB(108,121,255),danger=Color3.fromRGB(237,66,69),success=Color3.fromRGB(87,242,135),headerBtn=Color3.fromRGB(55,55,80),closeBtn=Color3.fromRGB(255,85,85)}
THEMES["light"] = {main=Color3.fromRGB(243,243,250),header=Color3.fromRGB(255,255,255),chat=Color3.fromRGB(248,248,255),input=Color3.fromRGB(255,255,255),userMsg=Color3.fromRGB(225,225,240),aiMsg=Color3.fromRGB(215,230,255),status=Color3.fromRGB(248,248,255),button=Color3.fromRGB(225,225,240),text=Color3.fromRGB(15,15,30),accent=Color3.fromRGB(88,101,242),subtext=Color3.fromRGB(90,90,120),hover=Color3.fromRGB(108,121,255),danger=Color3.fromRGB(237,66,69),success=Color3.fromRGB(60,200,100),headerBtn=Color3.fromRGB(200,200,220),closeBtn=Color3.fromRGB(255,85,85)}

local FILE_NAME = "GeminiAI_Data.json"
local function saveData() pcall(function() if writefile then writefile(FILE_NAME, HttpService:JSONEncode({apiKey=GEMINI_API_KEY,allApiKeys=allApiKeys,chatHistory=chatHistory,language=currentLanguage,theme=currentTheme,modelIndex=currentModelIndex,currentChatId=currentChatId})) end end) end
local function loadData() local ok,r=pcall(function() if readfile and isfile and isfile(FILE_NAME) then return HttpService:JSONDecode(readfile(FILE_NAME)) end return nil end) if ok and r then if r.apiKey then GEMINI_API_KEY=r.apiKey savedApiKey=r.apiKey end if r.allApiKeys then allApiKeys=r.allApiKeys end if r.chatHistory then chatHistory=r.chatHistory end if r.language and T[r.language] then currentLanguage=r.language end if r.theme and THEMES[r.theme] then currentTheme=r.theme end if r.modelIndex and MODELS[r.modelIndex] then currentModelIndex=r.modelIndex end if r.currentChatId then currentChatId=r.currentChatId end end end
loadData()
if savedApiKey~="" then local f=false for i=1,#allApiKeys do if allApiKeys[i]==savedApiKey then f=true break end end if not f then allApiKeys[#allApiKeys+1]=savedApiKey end end

local function gt() return THEMES[currentTheme] end
local function tx(k,...) local l=T[currentLanguage] or T["en"] local v=l[k] or T["en"][k] or k if select("#",...)>0 then local o,f=pcall(string.format,v,...) if o then return f end end return v end
local function uCopy(t) pcall(function() if setclipboard then setclipboard(t) elseif toclipboard then toclipboard(t) end end) pcall(function() game:GetService("StarterGui"):SetCore("SendNotification",{Title="Gemini AI",Text=tx("copiedNotif"),Duration=3}) end) end
local function addH(b,n,h) b.MouseEnter:Connect(function() TweenService:Create(b,TweenInfo.new(0.15),{BackgroundColor3=h}):Play() end) b.MouseLeave:Connect(function() TweenService:Create(b,TweenInfo.new(0.15),{BackgroundColor3=n}):Play() end) end
local function maskK(k) if #k<=8 then return string.rep("*",#k) end return string.sub(k,1,4)..string.rep("*",#k-8)..string.sub(k,#k-3) end
local function mkC(p,r) local c=Instance.new("UICorner") c.CornerRadius=UDim.new(0,r or 12) c.Parent=p end
local function mkS(p,col) local s=Instance.new("UIStroke") s.Color=col s.Thickness=1 s.Transparency=0.5 s.Parent=p end

for _,g in ipairs(playerGui:GetChildren()) do if g.Name=="GeminiAIGui" then g:Destroy() end end
local screenGui=Instance.new("ScreenGui") screenGui.Name="GeminiAIGui" screenGui.ResetOnSpawn=false screenGui.ZIndexBehavior=Enum.ZIndexBehavior.Sibling screenGui.Parent=playerGui

local dragging=false local dragStart=nil local startPos=nil local wasDragged=false
local toggleBtn=Instance.new("TextButton") toggleBtn.Size=UDim2.new(0,50,0,50) toggleBtn.Position=UDim2.new(0,10,0,10) toggleBtn.BackgroundColor3=Color3.fromRGB(30,30,45) toggleBtn.BorderSizePixel=0 toggleBtn.Text="" toggleBtn.ZIndex=999 toggleBtn.Visible=false toggleBtn.Parent=screenGui mkC(toggleBtn,25)
local btnStroke=Instance.new("UIStroke") btnStroke.Color=Color3.fromRGB(88,101,242) btnStroke.Thickness=2 btnStroke.Transparency=0.2 btnStroke.Parent=toggleBtn
local btnIcon=Instance.new("ImageLabel") btnIcon.Size=UDim2.new(1,-12,1,-12) btnIcon.Position=UDim2.new(0,6,0,6) btnIcon.BackgroundTransparency=1 btnIcon.Image="rbxassetid://98096796340814" btnIcon.ScaleType=Enum.ScaleType.Fit btnIcon.ZIndex=1000 btnIcon.Parent=toggleBtn
toggleBtn.MouseEnter:Connect(function() if not dragging then TweenService:Create(toggleBtn,TweenInfo.new(0.2),{Size=UDim2.new(0,56,0,56)}):Play() TweenService:Create(btnStroke,TweenInfo.new(0.2),{Color=Color3.fromRGB(108,121,255)}):Play() end end)
toggleBtn.MouseLeave:Connect(function() if not dragging then TweenService:Create(toggleBtn,TweenInfo.new(0.2),{Size=UDim2.new(0,50,0,50)}):Play() TweenService:Create(btnStroke,TweenInfo.new(0.2),{Color=Color3.fromRGB(88,101,242)}):Play() end end)
toggleBtn.InputBegan:Connect(function(input) if input.UserInputType==Enum.UserInputType.MouseButton1 or input.UserInputType==Enum.UserInputType.Touch then dragging=true wasDragged=false dragStart=input.Position startPos=toggleBtn.Position end end)
UserInputService.InputChanged:Connect(function(input) if dragging and (input.UserInputType==Enum.UserInputType.MouseMovement or input.UserInputType==Enum.UserInputType.Touch) then local delta=input.Position-dragStart if delta.Magnitude>5 then wasDragged=true end toggleBtn.Position=UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y) end end)
local function showContent() if contentContainerRef and contentContainerRef.Parent then contentContainerRef.Visible=true end end
local function hideContent() if contentContainerRef and contentContainerRef.Parent then contentContainerRef.Visible=false end end
UserInputService.InputEnded:Connect(function(input) if input.UserInputType==Enum.UserInputType.MouseButton1 or input.UserInputType==Enum.UserInputType.Touch then if dragging then dragging=false if not wasDragged then isOpen=not isOpen if isOpen then TweenService:Create(toggleBtn,TweenInfo.new(0.3),{Rotation=180}):Play() showContent() else TweenService:Create(toggleBtn,TweenInfo.new(0.3),{Rotation=0}):Play() hideContent() end end end end end)

local function verifyApiKey(key,cb) task.spawn(function() if #key<20 then cb(false) return end local ok,r=pcall(function() return request({Url="https://generativelanguage.googleapis.com/v1beta/models?key="..key,Method="GET",Headers={["Content-Type"]="application/json"}}) end) if ok and r then if r.StatusCode==200 then cb(true) return elseif r.StatusCode==400 or r.StatusCode==403 then cb(false) return end end local ok2,r2=pcall(function() return request({Url="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-lite:generateContent?key="..key,Method="POST",Headers={["Content-Type"]="application/json"},Body=HttpService:JSONEncode({contents={{parts={{text="hi"}}}}})}) end) if ok2 and r2 then if r2.StatusCode==200 or r2.StatusCode==429 then cb(true) return elseif r2.StatusCode==400 or r2.StatusCode==403 then cb(false) return end end if string.sub(key,1,4)=="AIza" and #key>=35 then cb(true) else cb(false) end end) end

local function createMessage(text,isUser) if not chatFrameRef then return nil end local th=gt() local mF=Instance.new("Frame") mF.Name="Msg" mF.Size=UDim2.new(1,0,0,0) mF.AutomaticSize=Enum.AutomaticSize.Y mF.BackgroundColor3=isUser and th.userMsg or th.aiMsg mF.BorderSizePixel=0 mF.Parent=chatFrameRef mkC(mF,14) local ly=Instance.new("UIListLayout") ly.Padding=UDim.new(0,6) ly.SortOrder=Enum.SortOrder.LayoutOrder ly.Parent=mF local pd=Instance.new("UIPadding") pd.PaddingTop=UDim.new(0,12) pd.PaddingBottom=UDim.new(0,12) pd.PaddingLeft=UDim.new(0,14) pd.PaddingRight=UDim.new(0,14) pd.Parent=mF local rl=Instance.new("TextLabel") rl.Size=UDim2.new(1,0,0,16) rl.BackgroundTransparency=1 rl.Text=isUser and tx("you") or MODELS[currentModelIndex].name rl.TextColor3=th.accent rl.TextSize=12 rl.Font=Enum.Font.GothamBold rl.TextXAlignment=Enum.TextXAlignment.Left rl.LayoutOrder=0 rl.Parent=mF local tb=Instance.new("TextBox") tb.Name="TC" tb.Size=UDim2.new(1,0,0,0) tb.AutomaticSize=Enum.AutomaticSize.Y tb.BackgroundTransparency=1 tb.Text=text tb.TextColor3=th.text tb.TextSize=15 tb.Font=Enum.Font.Gotham tb.TextWrapped=true tb.TextXAlignment=Enum.TextXAlignment.Left tb.TextYAlignment=Enum.TextYAlignment.Top tb.TextEditable=false tb.ClearTextOnFocus=false tb.MultiLine=true tb.LayoutOrder=1 tb.Parent=mF local bh=Instance.new("Frame") bh.Size=UDim2.new(1,0,0,28) bh.BackgroundTransparency=1 bh.LayoutOrder=2 bh.Parent=mF local cp=Instance.new("TextButton") cp.Size=UDim2.new(0,100,0,28) cp.Position=UDim2.new(1,-100,0,0) cp.BackgroundColor3=th.button cp.BorderSizePixel=0 cp.Text=tx("copy") cp.TextColor3=th.text cp.TextSize=12 cp.Font=Enum.Font.GothamBold cp.Parent=bh mkC(cp,8) cp.MouseButton1Click:Connect(function() local sel=tb.Text if tb.CursorPosition~=-1 and tb.SelectionStart~=-1 then local s=math.min(tb.CursorPosition,tb.SelectionStart) local e=math.max(tb.CursorPosition,tb.SelectionStart) if s~=e then sel=string.sub(tb.Text,s,e-1) end end uCopy(sel) cp.Text=tx("copied") cp.BackgroundColor3=gt().success task.delay(1.5,function() if cp and cp.Parent then cp.Text=tx("copy") cp.BackgroundColor3=gt().button end end) end) task.defer(function() if chatFrameRef then chatFrameRef.CanvasPosition=Vector2.new(0,chatFrameRef.AbsoluteCanvasSize.Y) end end) return mF end

local function buildPastContext() local ctx={} for i=1,#chatHistory do if chatHistory[i].id~=currentChatId then for j=1,#chatHistory[i].messages do local m=chatHistory[i].messages[j] ctx[#ctx+1]={role=m.isUser and "user" or "model",parts={{text=m.text}}} end end end return ctx end

local function sendToGemini(userMessage) local mid=MODELS[currentModelIndex].id local url="https://generativelanguage.googleapis.com/v1beta/"..mid..":generateContent?key="..GEMINI_API_KEY local contents={} local past=buildPastContext() for i=1,#past do contents[#contents+1]=past[i] end for i=1,#currentChatMessages do local m=currentChatMessages[i] contents[#contents+1]={role=m.isUser and "user" or "model",parts={{text=m.text}}} end contents[#contents+1]={role="user",parts={{text=userMessage}}} local ok,resp=pcall(function() return request({Url=url,Method="POST",Headers={["Content-Type"]="application/json"},Body=HttpService:JSONEncode({contents=contents})}) end) if ok and resp and resp.StatusCode==200 then local data=HttpService:JSONDecode(resp.Body) if data.candidates and data.candidates[1] and data.candidates[1].content and data.candidates[1].content.parts and data.candidates[1].content.parts[1] then return data.candidates[1].content.parts[1].text end return tx("unexpectedFormat") elseif ok and resp and resp.StatusCode==429 then if currentModelIndex<#MODELS then local old=MODELS[currentModelIndex].name currentModelIndex=currentModelIndex+1 if statusLabelRef then statusLabelRef.Text=tx("status",MODELS[currentModelIndex].name) end saveData() return tx("limitReached",old,MODELS[currentModelIndex].name).."\n\n"..sendToGemini(userMessage) end return tx("apiError","Rate limit") else local err="Unknown" if resp then err="Code: "..tostring(resp.StatusCode) pcall(function() local d=HttpService:JSONDecode(resp.Body) if d.error and d.error.message then err=d.error.message end end) end return tx("apiError",err) end end

local function clearChat() if not chatFrameRef then return end for _,ch in ipairs(chatFrameRef:GetChildren()) do if ch:IsA("Frame") then ch:Destroy() end end end
local function saveChatToHistory() if currentChatId and #currentChatMessages>0 then for i=1,#chatHistory do if chatHistory[i].id==currentChatId then chatHistory[i].messages=currentChatMessages saveData() return end end end end
local function startNewChat() saveChatToHistory() currentChatId=HttpService:GenerateGUID(false) currentChatMessages={} clearChat() createMessage(tx("welcome",MODELS[currentModelIndex].name),false) saveData() end
local function sendMessage(msg) if not msg then return end local tr=msg:gsub("^%s+",""):gsub("%s+$","") if tr=="" or isMinimized then return end if not currentChatId then currentChatId=HttpService:GenerateGUID(false) currentChatMessages={} end createMessage(tr,true) currentChatMessages[#currentChatMessages+1]={text=tr,isUser=true} if inputBoxRef then inputBoxRef.Text="" end local cn=string.sub(tr,1,40) if #tr>40 then cn=cn.."..." end local found=false for i=1,#chatHistory do if chatHistory[i].id==currentChatId then found=true chatHistory[i].messages=currentChatMessages break end end if not found then chatHistory[#chatHistory+1]={id=currentChatId,name=cn,messages=currentChatMessages} end saveData() local lm=createMessage(tx("thinking"),false) task.spawn(function() local ai=sendToGemini(tr) if lm and lm.Parent then lm:Destroy() end createMessage(ai,false) currentChatMessages[#currentChatMessages+1]={text=ai,isUser=false} for i=1,#chatHistory do if chatHistory[i].id==currentChatId then chatHistory[i].messages=currentChatMessages break end end saveData() end) end

local apiKeyGui,apiInput,apiStatusLbl,instrFrame

local function buildApiKeyGui()
if apiKeyGui then apiKeyGui:Destroy() end
local th=gt()
apiKeyGui=Instance.new("Frame") apiKeyGui.Name="ApiKeyGui" apiKeyGui.Size=UDim2.new(1,0,1,0) apiKeyGui.Position=UDim2.new(0,0,0,0) apiKeyGui.BackgroundColor3=th.main apiKeyGui.BorderSizePixel=0 apiKeyGui.Active=true apiKeyGui.Parent=screenGui contentContainerRef=apiKeyGui
local bgGrad=Instance.new("UIGradient") bgGrad.Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(15,15,35)),ColorSequenceKeypoint.new(0.5,th.main),ColorSequenceKeypoint.new(1,Color3.fromRGB(20,20,45))}) bgGrad.Rotation=135 bgGrad.Parent=apiKeyGui
local topBar=Instance.new("Frame") topBar.Size=UDim2.new(1,0,0,4) topBar.BackgroundColor3=th.accent topBar.BorderSizePixel=0 topBar.ZIndex=10 topBar.Parent=apiKeyGui
local topGr=Instance.new("UIGradient") topGr.Color=ColorSequence.new({ColorSequenceKeypoint.new(0,th.accent),ColorSequenceKeypoint.new(0.5,th.hover),ColorSequenceKeypoint.new(1,th.accent)}) topGr.Parent=topBar
local logoA=Instance.new("Frame") logoA.Size=UDim2.new(0,80,0,80) logoA.Position=UDim2.new(0.5,-40,0,40) logoA.BackgroundColor3=th.accent logoA.BorderSizePixel=0 logoA.ZIndex=5 logoA.Parent=apiKeyGui mkC(logoA,40)
local logoI=Instance.new("ImageLabel") logoI.Size=UDim2.new(1,-20,1,-20) logoI.Position=UDim2.new(0,10,0,10) logoI.BackgroundTransparency=1 logoI.Image="rbxassetid://98096796340814" logoI.ScaleType=Enum.ScaleType.Fit logoI.ZIndex=6 logoI.Parent=logoA
local logoG=Instance.new("Frame") logoG.Size=UDim2.new(0,120,0,120) logoG.Position=UDim2.new(0.5,-60,0,20) logoG.BackgroundColor3=th.accent logoG.BackgroundTransparency=0.85 logoG.BorderSizePixel=0 logoG.ZIndex=4 logoG.Parent=apiKeyGui mkC(logoG,60)
local apiBY=Instance.new("TextLabel") apiBY.Size=UDim2.new(0,100,0,18) apiBY.Position=UDim2.new(0.5,-50,1,-22) apiBY.BackgroundTransparency=1 apiBY.Text="by:romokaso" apiBY.TextColor3=th.subtext apiBY.TextSize=11 apiBY.Font=Enum.Font.GothamBold apiBY.ZIndex=10 apiBY.Parent=apiKeyGui
local scrollFrame=Instance.new("ScrollingFrame") scrollFrame.Size=UDim2.new(1,0,1,-10) scrollFrame.Position=UDim2.new(0,0,0,5) scrollFrame.BackgroundTransparency=1 scrollFrame.BorderSizePixel=0 scrollFrame.ScrollBarThickness=6 scrollFrame.ScrollBarImageColor3=th.accent scrollFrame.AutomaticCanvasSize=Enum.AutomaticSize.Y scrollFrame.CanvasSize=UDim2.new(0,0,0,0) scrollFrame.ZIndex=5 scrollFrame.Parent=apiKeyGui
local ctr=Instance.new("Frame") ctr.Size=UDim2.new(0,480,0,0) ctr.AutomaticSize=Enum.AutomaticSize.Y ctr.Position=UDim2.new(0.5,-240,0,0) ctr.BackgroundTransparency=1 ctr.ZIndex=5 ctr.Parent=scrollFrame
local cl=Instance.new("UIListLayout") cl.Padding=UDim.new(0,14) cl.SortOrder=Enum.SortOrder.LayoutOrder cl.HorizontalAlignment=Enum.HorizontalAlignment.Center cl.Parent=ctr
local ctrPad=Instance.new("UIPadding") ctrPad.PaddingTop=UDim.new(0,130) ctrPad.PaddingBottom=UDim.new(0,40) ctrPad.Parent=ctr
local ttl=Instance.new("TextLabel") ttl.Size=UDim2.new(1,0,0,45) ttl.BackgroundTransparency=1 ttl.Text=tx("apiKeyTitle") ttl.TextColor3=th.text ttl.TextSize=28 ttl.Font=Enum.Font.GothamBold ttl.ZIndex=6 ttl.LayoutOrder=1 ttl.Parent=ctr
local subTtl=Instance.new("TextLabel") subTtl.Size=UDim2.new(1,0,0,25) subTtl.BackgroundTransparency=1 subTtl.Text="Powered by Google AI" subTtl.TextColor3=th.subtext subTtl.TextSize=14 subTtl.Font=Enum.Font.Gotham subTtl.ZIndex=6 subTtl.LayoutOrder=2 subTtl.Parent=ctr
local inputCard=Instance.new("Frame") inputCard.Size=UDim2.new(1,0,0,0) inputCard.AutomaticSize=Enum.AutomaticSize.Y inputCard.BackgroundColor3=th.header inputCard.BorderSizePixel=0 inputCard.ZIndex=6 inputCard.LayoutOrder=3 inputCard.Parent=ctr mkC(inputCard,16) mkS(inputCard,th.accent)
local icPad=Instance.new("UIPadding") icPad.PaddingTop=UDim.new(0,18) icPad.PaddingBottom=UDim.new(0,18) icPad.PaddingLeft=UDim.new(0,18) icPad.PaddingRight=UDim.new(0,18) icPad.Parent=inputCard
local icLay=Instance.new("UIListLayout") icLay.Padding=UDim.new(0,12) icLay.SortOrder=Enum.SortOrder.LayoutOrder icLay.Parent=inputCard
local inpLabel=Instance.new("TextLabel") inpLabel.Size=UDim2.new(1,0,0,20) inpLabel.BackgroundTransparency=1 inpLabel.Text=tx("enterApiKey") inpLabel.TextColor3=th.subtext inpLabel.TextSize=13 inpLabel.Font=Enum.Font.GothamBold inpLabel.TextXAlignment=Enum.TextXAlignment.Left inpLabel.ZIndex=7 inpLabel.LayoutOrder=1 inpLabel.Parent=inputCard
local iF=Instance.new("Frame") iF.Size=UDim2.new(1,0,0,52) iF.BackgroundColor3=th.input iF.BorderSizePixel=0 iF.ZIndex=7 iF.LayoutOrder=2 iF.Parent=inputCard mkC(iF,12) mkS(iF,th.accent)
apiInput=Instance.new("TextBox") apiInput.Size=UDim2.new(1,-24,1,0) apiInput.Position=UDim2.new(0,12,0,0) apiInput.BackgroundTransparency=1 apiInput.Text=savedApiKey apiInput.PlaceholderText="AIza..." apiInput.TextColor3=th.text apiInput.PlaceholderColor3=th.subtext apiInput.TextSize=15 apiInput.Font=Enum.Font.Gotham apiInput.ClearTextOnFocus=false apiInput.ZIndex=8 apiInput.Parent=iF
apiStatusLbl=Instance.new("TextLabel") apiStatusLbl.Size=UDim2.new(1,0,0,22) apiStatusLbl.BackgroundTransparency=1 apiStatusLbl.Text="" apiStatusLbl.TextColor3=th.danger apiStatusLbl.TextSize=13 apiStatusLbl.Font=Enum.Font.GothamBold apiStatusLbl.TextXAlignment=Enum.TextXAlignment.Left apiStatusLbl.ZIndex=7 apiStatusLbl.LayoutOrder=3 apiStatusLbl.Parent=inputCard
local bR=Instance.new("Frame") bR.Size=UDim2.new(1,0,0,50) bR.BackgroundTransparency=1 bR.ZIndex=7 bR.LayoutOrder=4 bR.Parent=inputCard
local cfBtn=Instance.new("TextButton") cfBtn.Size=UDim2.new(0.48,0,1,0) cfBtn.BackgroundColor3=th.accent cfBtn.BorderSizePixel=0 cfBtn.Text=tx("confirm") cfBtn.TextColor3=Color3.fromRGB(255,255,255) cfBtn.TextSize=16 cfBtn.Font=Enum.Font.GothamBold cfBtn.ZIndex=8 cfBtn.Parent=bR mkC(cfBtn,12) addH(cfBtn,th.accent,th.hover)
local htB=Instance.new("TextButton") htB.Size=UDim2.new(0.48,0,1,0) htB.Position=UDim2.new(0.52,0,0,0) htB.BackgroundColor3=th.button htB.BorderSizePixel=0 htB.Text=tx("howToGetKey") htB.TextColor3=th.text htB.TextSize=14 htB.Font=Enum.Font.GothamBold htB.ZIndex=8 htB.Parent=bR mkC(htB,12) addH(htB,th.button,th.accent)
local keysCard=Instance.new("Frame") keysCard.Size=UDim2.new(1,0,0,0) keysCard.AutomaticSize=Enum.AutomaticSize.Y keysCard.BackgroundColor3=th.header keysCard.BorderSizePixel=0 keysCard.ZIndex=6 keysCard.LayoutOrder=4 keysCard.Parent=ctr mkC(keysCard,16) mkS(keysCard,th.accent)
local kcPad=Instance.new("UIPadding") kcPad.PaddingTop=UDim.new(0,14) kcPad.PaddingBottom=UDim.new(0,14) kcPad.PaddingLeft=UDim.new(0,14) kcPad.PaddingRight=UDim.new(0,14) kcPad.Parent=keysCard
local kcLay=Instance.new("UIListLayout") kcLay.Padding=UDim.new(0,8) kcLay.SortOrder=Enum.SortOrder.LayoutOrder kcLay.Parent=keysCard
local kT=Instance.new("TextLabel") kT.Size=UDim2.new(1,0,0,25) kT.BackgroundTransparency=1 kT.Text=tx("savedKeys") kT.TextColor3=th.text kT.TextSize=15 kT.Font=Enum.Font.GothamBold kT.TextXAlignment=Enum.TextXAlignment.Left kT.ZIndex=7 kT.LayoutOrder=1 kT.Parent=keysCard
local kF=Instance.new("Frame") kF.Size=UDim2.new(1,0,0,0) kF.AutomaticSize=Enum.AutomaticSize.Y kF.BackgroundTransparency=1 kF.ZIndex=7 kF.LayoutOrder=2 kF.Parent=keysCard
local kFL=Instance.new("UIListLayout") kFL.Padding=UDim.new(0,4) kFL.SortOrder=Enum.SortOrder.LayoutOrder kFL.Parent=kF
local function refK() for _,ch in ipairs(kF:GetChildren()) do if ch:IsA("Frame") then ch:Destroy() end end for ki=1,#allApiKeys do local key=allApiKeys[ki] local iC=key==GEMINI_API_KEY local rw=Instance.new("Frame") rw.Size=UDim2.new(1,0,0,40) rw.BackgroundColor3=th.button rw.BorderSizePixel=0 rw.LayoutOrder=ki rw.ZIndex=8 rw.Parent=kF mkC(rw,10) local kL=Instance.new("TextButton") kL.Size=UDim2.new(1,-80,1,0) kL.Position=UDim2.new(0,12,0,0) kL.BackgroundTransparency=1 kL.Text=(iC and "‚ñ∂ " or "   ")..maskK(key) kL.TextColor3=iC and th.success or th.text kL.TextSize=13 kL.Font=Enum.Font.Gotham kL.TextXAlignment=Enum.TextXAlignment.Left kL.TextTruncate=Enum.TextTruncate.AtEnd kL.ZIndex=9 kL.Parent=rw kL.MouseButton1Click:Connect(function() apiInput.Text=key end) local dB=Instance.new("TextButton") dB.Size=UDim2.new(0,34,0,30) dB.Position=UDim2.new(1,-42,0.5,-15) dB.BackgroundColor3=th.danger dB.BorderSizePixel=0 dB.Text="üóë" dB.TextColor3=Color3.fromRGB(255,255,255) dB.TextSize=14 dB.Font=Enum.Font.GothamBold dB.ZIndex=9 dB.Parent=rw mkC(dB,8) dB.MouseButton1Click:Connect(function() for di=#allApiKeys,1,-1 do if allApiKeys[di]==key then table.remove(allApiKeys,di) break end end if GEMINI_API_KEY==key then GEMINI_API_KEY=#allApiKeys>0 and allApiKeys[1] or "" savedApiKey=GEMINI_API_KEY apiInput.Text=GEMINI_API_KEY end saveData() refK() end) end end
refK()
local ctrlCard=Instance.new("Frame") ctrlCard.Size=UDim2.new(1,0,0,0) ctrlCard.AutomaticSize=Enum.AutomaticSize.Y ctrlCard.BackgroundColor3=th.header ctrlCard.BorderSizePixel=0 ctrlCard.ZIndex=6 ctrlCard.LayoutOrder=5 ctrlCard.Parent=ctr mkC(ctrlCard,16) mkS(ctrlCard,th.accent)
local ccPad=Instance.new("UIPadding") ccPad.PaddingTop=UDim.new(0,14) ccPad.PaddingBottom=UDim.new(0,14) ccPad.PaddingLeft=UDim.new(0,14) ccPad.PaddingRight=UDim.new(0,14) ccPad.Parent=ctrlCard
local ccLay=Instance.new("UIListLayout") ccLay.Padding=UDim.new(0,10) ccLay.SortOrder=Enum.SortOrder.LayoutOrder ccLay.Parent=ctrlCard
local lR=Instance.new("Frame") lR.Size=UDim2.new(1,0,0,44) lR.BackgroundTransparency=1 lR.ZIndex=7 lR.LayoutOrder=1 lR.Parent=ctrlCard
local function gLN() for _,l in ipairs(LANGUAGES) do if l.code==currentLanguage then return l.name end end return "English" end
local lB=Instance.new("TextButton") lB.Size=UDim2.new(0.48,0,1,0) lB.BackgroundColor3=th.button lB.BorderSizePixel=0 lB.Text=gLN() lB.TextColor3=th.text lB.TextSize=14 lB.Font=Enum.Font.GothamBold lB.ZIndex=8 lB.Parent=lR mkC(lB,12) addH(lB,th.button,th.accent)
local cBt=Instance.new("TextButton") cBt.Size=UDim2.new(0.48,0,1,0) cBt.Position=UDim2.new(0.52,0,0,0) cBt.BackgroundColor3=th.closeBtn cBt.BorderSizePixel=0 cBt.Text="‚ùå "..tx("close") cBt.TextColor3=Color3.fromRGB(255,255,255) cBt.TextSize=14 cBt.Font=Enum.Font.GothamBold cBt.ZIndex=8 cBt.Parent=lR mkC(cBt,12) addH(cBt,th.closeBtn,Color3.fromRGB(255,120,120))
local lD=Instance.new("Frame") lD.Size=UDim2.new(1,0,0,0) lD.BackgroundColor3=th.chat lD.BorderSizePixel=0 lD.ClipsDescendants=true lD.ZIndex=9 lD.LayoutOrder=2 lD.Parent=ctrlCard mkC(lD,12) mkS(lD,th.accent)
local ldL=Instance.new("UIListLayout") ldL.Padding=UDim.new(0,2) ldL.SortOrder=Enum.SortOrder.LayoutOrder ldL.Parent=lD
local ldP=Instance.new("UIPadding") ldP.PaddingTop=UDim.new(0,4) ldP.PaddingBottom=UDim.new(0,4) ldP.PaddingLeft=UDim.new(0,4) ldP.PaddingRight=UDim.new(0,4) ldP.Parent=lD
local lO=false
for li=1,#LANGUAGES do local lang=LANGUAGES[li] local lb=Instance.new("TextButton") lb.Size=UDim2.new(1,-8,0,34) lb.BackgroundColor3=lang.code==currentLanguage and th.accent or th.button lb.BorderSizePixel=0 lb.Text=lang.name lb.TextColor3=Color3.fromRGB(255,255,255) lb.TextSize=13 lb.Font=Enum.Font.GothamBold lb.ZIndex=10 lb.Parent=lD mkC(lb,8) lb.MouseButton1Click:Connect(function() currentLanguage=lang.code saveData() lO=false TweenService:Create(lD,TweenInfo.new(0.2),{Size=UDim2.new(1,0,0,0)}):Play() task.wait(0.25) buildApiKeyGui() end) end
lB.MouseButton1Click:Connect(function() lO=not lO TweenService:Create(lD,TweenInfo.new(0.2),{Size=UDim2.new(1,0,0,lO and (#LANGUAGES*36+8) or 0)}):Play() end)
local ccOv=Instance.new("Frame") ccOv.Size=UDim2.new(1,0,1,0) ccOv.BackgroundColor3=th.main ccOv.BackgroundTransparency=0 ccOv.BorderSizePixel=0 ccOv.Visible=false ccOv.ZIndex=200 ccOv.Active=true ccOv.Parent=apiKeyGui
local ccCard=Instance.new("Frame") ccCard.Size=UDim2.new(0,420,0,0) ccCard.AutomaticSize=Enum.AutomaticSize.Y ccCard.Position=UDim2.new(0.5,-210,0.5,0) ccCard.AnchorPoint=Vector2.new(0,0.5) ccCard.BackgroundColor3=th.header ccCard.BorderSizePixel=0 ccCard.ZIndex=201 ccCard.Parent=ccOv mkC(ccCard,20) mkS(ccCard,th.accent)
local ccCardPad=Instance.new("UIPadding") ccCardPad.PaddingTop=UDim.new(0,25) ccCardPad.PaddingBottom=UDim.new(0,25) ccCardPad.PaddingLeft=UDim.new(0,25) ccCardPad.PaddingRight=UDim.new(0,25) ccCardPad.Parent=ccCard
local ccCardLay=Instance.new("UIListLayout") ccCardLay.Padding=UDim.new(0,18) ccCardLay.SortOrder=Enum.SortOrder.LayoutOrder ccCardLay.HorizontalAlignment=Enum.HorizontalAlignment.Center ccCardLay.Parent=ccCard
local ccT=Instance.new("TextLabel") ccT.Size=UDim2.new(1,0,0,60) ccT.BackgroundTransparency=1 ccT.Text=tx("closeApiConfirm") ccT.TextColor3=th.text ccT.TextSize=22 ccT.Font=Enum.Font.GothamBold ccT.TextWrapped=true ccT.ZIndex=202 ccT.LayoutOrder=1 ccT.Parent=ccCard
local ccBR=Instance.new("Frame") ccBR.Size=UDim2.new(1,0,0,55) ccBR.BackgroundTransparency=1 ccBR.ZIndex=202 ccBR.LayoutOrder=2 ccBR.Parent=ccCard
local ccY=Instance.new("TextButton") ccY.Size=UDim2.new(0.48,0,1,0) ccY.BackgroundColor3=th.success ccY.BorderSizePixel=0 ccY.Text=tx("yes") ccY.TextColor3=Color3.fromRGB(255,255,255) ccY.TextSize=20 ccY.Font=Enum.Font.GothamBold ccY.ZIndex=203 ccY.Parent=ccBR mkC(ccY,12) addH(ccY,th.success,Color3.fromRGB(100,255,150))
local ccN=Instance.new("TextButton") ccN.Size=UDim2.new(0.48,0,1,0) ccN.Position=UDim2.new(0.52,0,0,0) ccN.BackgroundColor3=th.danger ccN.BorderSizePixel=0 ccN.Text=tx("no") ccN.TextColor3=Color3.fromRGB(255,255,255) ccN.TextSize=20 ccN.Font=Enum.Font.GothamBold ccN.ZIndex=203 ccN.Parent=ccBR mkC(ccN,12) addH(ccN,th.danger,Color3.fromRGB(255,80,80))
ccY.MouseButton1Click:Connect(function() screenGui:Destroy() end)
ccN.MouseButton1Click:Connect(function() ccOv.Visible=false end)
cBt.MouseButton1Click:Connect(function() ccOv.Visible=true end)
instrFrame=Instance.new("Frame") instrFrame.Size=UDim2.new(1,0,1,0) instrFrame.BackgroundColor3=th.main instrFrame.BorderSizePixel=0 instrFrame.Visible=false instrFrame.ZIndex=100 instrFrame.Parent=apiKeyGui
local iH=Instance.new("Frame") iH.Size=UDim2.new(1,0,0,60) iH.BackgroundColor3=th.accent iH.BorderSizePixel=0 iH.ZIndex=102 iH.Parent=instrFrame
local iT2=Instance.new("TextLabel") iT2.Size=UDim2.new(1,-70,1,0) iT2.Position=UDim2.new(0,20,0,0) iT2.BackgroundTransparency=1 iT2.Text=tx("instruction") iT2.TextColor3=Color3.fromRGB(255,255,255) iT2.TextSize=20 iT2.Font=Enum.Font.GothamBold iT2.TextXAlignment=Enum.TextXAlignment.Left iT2.ZIndex=103 iT2.Parent=iH
local iBk=Instance.new("TextButton") iBk.Size=UDim2.new(0,40,0,40) iBk.Position=UDim2.new(1,-50,0.5,-20) iBk.BackgroundColor3=Color3.fromRGB(255,255,255) iBk.BackgroundTransparency=0.8 iBk.BorderSizePixel=0 iBk.Text="‚Üê" iBk.TextColor3=Color3.fromRGB(255,255,255) iBk.TextSize=22 iBk.Font=Enum.Font.GothamBold iBk.ZIndex=103 iBk.Parent=iH mkC(iBk,10) iBk.MouseButton1Click:Connect(function() instrFrame.Visible=false end)
local iS=Instance.new("ScrollingFrame") iS.Size=UDim2.new(1,0,1,-60) iS.Position=UDim2.new(0,0,0,60) iS.BackgroundTransparency=1 iS.BorderSizePixel=0 iS.ScrollBarThickness=6 iS.ScrollBarImageColor3=th.accent iS.AutomaticCanvasSize=Enum.AutomaticSize.Y iS.ZIndex=101 iS.Parent=instrFrame
local isL=Instance.new("UIListLayout") isL.Padding=UDim.new(0,12) isL.SortOrder=Enum.SortOrder.LayoutOrder isL.Parent=iS
local isP=Instance.new("UIPadding") isP.PaddingTop=UDim.new(0,18) isP.PaddingBottom=UDim.new(0,18) isP.PaddingLeft=UDim.new(0,18) isP.PaddingRight=UDim.new(0,18) isP.Parent=iS
local lC=Instance.new("Frame") lC.Size=UDim2.new(1,0,0,55) lC.BackgroundColor3=th.button lC.BorderSizePixel=0 lC.ZIndex=102 lC.LayoutOrder=0 lC.Parent=iS mkC(lC,12)
local lTx=Instance.new("TextLabel") lTx.Size=UDim2.new(1,-120,1,0) lTx.Position=UDim2.new(0,12,0,0) lTx.BackgroundTransparency=1 lTx.Text="aistudio.google.com/apikey" lTx.TextColor3=th.accent lTx.TextSize=13 lTx.Font=Enum.Font.GothamBold lTx.TextXAlignment=Enum.TextXAlignment.Left lTx.ZIndex=103 lTx.Parent=lC
local cpL=Instance.new("TextButton") cpL.Size=UDim2.new(0,100,0,35) cpL.Position=UDim2.new(1,-108,0.5,-17) cpL.BackgroundColor3=th.accent cpL.BorderSizePixel=0 cpL.Text=tx("copyLink") cpL.TextColor3=Color3.fromRGB(255,255,255) cpL.TextSize=11 cpL.Font=Enum.Font.GothamBold cpL.ZIndex=103 cpL.Parent=lC mkC(cpL,8)
cpL.MouseButton1Click:Connect(function() uCopy("https://aistudio.google.com/apikey") cpL.Text=tx("copied") cpL.BackgroundColor3=th.success task.delay(1.5,function() if cpL and cpL.Parent then cpL.Text=tx("copyLink") cpL.BackgroundColor3=th.accent end end) end)
for si=1,5 do local cd=Instance.new("Frame") cd.Size=UDim2.new(1,0,0,0) cd.AutomaticSize=Enum.AutomaticSize.Y cd.BackgroundColor3=th.button cd.BorderSizePixel=0 cd.ZIndex=102 cd.LayoutOrder=si cd.Parent=iS mkC(cd,12) local cdL=Instance.new("UIListLayout") cdL.Padding=UDim.new(0,6) cdL.SortOrder=Enum.SortOrder.LayoutOrder cdL.Parent=cd local cdP=Instance.new("UIPadding") cdP.PaddingTop=UDim.new(0,14) cdP.PaddingBottom=UDim.new(0,14) cdP.PaddingLeft=UDim.new(0,14) cdP.PaddingRight=UDim.new(0,14) cdP.Parent=cd local tR=Instance.new("Frame") tR.Size=UDim2.new(1,0,0,32) tR.BackgroundTransparency=1 tR.ZIndex=103 tR.LayoutOrder=1 tR.Parent=cd local nBa=Instance.new("TextLabel") nBa.Size=UDim2.new(0,32,0,32) nBa.BackgroundColor3=th.accent nBa.BorderSizePixel=0 nBa.Text=tostring(si) nBa.TextColor3=Color3.fromRGB(255,255,255) nBa.TextSize=18 nBa.Font=Enum.Font.GothamBold nBa.ZIndex=104 nBa.Parent=tR mkC(nBa,10) local tLa=Instance.new("TextLabel") tLa.Size=UDim2.new(1,-42,0,32) tLa.Position=UDim2.new(0,42,0,0) tLa.BackgroundTransparency=1 tLa.Text=tx("step"..si.."title") tLa.TextColor3=th.text tLa.TextSize=16 tLa.Font=Enum.Font.GothamBold tLa.TextXAlignment=Enum.TextXAlignment.Left tLa.TextWrapped=true tLa.ZIndex=104 tLa.Parent=tR local dLa=Instance.new("TextLabel") dLa.Size=UDim2.new(1,0,0,0) dLa.AutomaticSize=Enum.AutomaticSize.Y dLa.BackgroundTransparency=1 dLa.Text=tx("step"..si.."desc") dLa.TextColor3=th.subtext dLa.TextSize=14 dLa.Font=Enum.Font.Gotham dLa.TextWrapped=true dLa.TextXAlignment=Enum.TextXAlignment.Left dLa.ZIndex=103 dLa.LayoutOrder=2 dLa.Parent=cd end
htB.MouseButton1Click:Connect(function() instrFrame.Visible=true end)

local function doApiConfirm()
local key=apiInput.Text:gsub("%s+","")
if key=="" then apiStatusLbl.Text=tx("apiKeyInvalid") apiStatusLbl.TextColor3=th.danger return end
apiStatusLbl.Text=tx("checking") apiStatusLbl.TextColor3=Color3.fromRGB(255,200,50) cfBtn.Text="..."
verifyApiKey(key,function(valid) if valid then GEMINI_API_KEY=key savedApiKey=key local f=false for i=1,#allApiKeys do if allApiKeys[i]==key then f=true break end end if not f then allApiKeys[#allApiKeys+1]=key end apiStatusLbl.Text=tx("apiKeyValid") apiStatusLbl.TextColor3=th.success saveData() refK() task.wait(0.5) launchMainGui() else apiStatusLbl.Text=tx("apiKeyInvalid") apiStatusLbl.TextColor3=th.danger cfBtn.Text=tx("confirm") end end)
end

cfBtn.MouseButton1Click:Connect(doApiConfirm)
apiInput.FocusLost:Connect(function(ep) if ep then doApiConfirm() end end)
end

function launchMainGui()
if apiKeyGui then apiKeyGui.Visible=false end isMainGuiLaunched=true toggleBtn.Visible=true isOpen=true TweenService:Create(toggleBtn,TweenInfo.new(0.3),{Rotation=180}):Play()
local th=gt()
local mf=Instance.new("Frame") mf.Name="MainFrame" mf.Size=UDim2.new(0,680,0,700) mf.Position=UDim2.new(0.5,-340,0.5,-350) mf.BackgroundColor3=th.main mf.BorderSizePixel=0 mf.Active=true mf.Draggable=true mf.ClipsDescendants=true mf.Parent=screenGui mainFrameRef=mf mkC(mf,20) mkS(mf,th.accent) contentContainerRef=mf
local hdr=Instance.new("Frame") hdr.Size=UDim2.new(1,0,0,58) hdr.BackgroundColor3=th.header hdr.BorderSizePixel=0 hdr.Parent=mf mkC(hdr,20)
local hC=Instance.new("Frame") hC.Size=UDim2.new(1,0,0,20) hC.Position=UDim2.new(0,0,1,-20) hC.BackgroundColor3=th.header hC.BorderSizePixel=0 hC.Parent=hdr
local function hB(px,ico,col) local b=Instance.new("TextButton") b.Size=UDim2.new(0,40,0,40) b.Position=UDim2.new(0,px,0.5,-20) b.BackgroundColor3=col or th.headerBtn b.BorderSizePixel=0 b.Text=ico b.TextColor3=Color3.fromRGB(255,255,255) b.TextSize=18 b.Font=Enum.Font.GothamBold b.Parent=hdr mkC(b,12) return b end
local histBtn=hB(12,"üìÇ",th.accent)
local titleLbl=Instance.new("TextLabel") titleLbl.Size=UDim2.new(1,-320,1,0) titleLbl.Position=UDim2.new(0,60,0,0) titleLbl.BackgroundTransparency=1 titleLbl.Text=tx("title") titleLbl.TextColor3=th.text titleLbl.TextSize=17 titleLbl.Font=Enum.Font.GothamBold titleLbl.TextXAlignment=Enum.TextXAlignment.Left titleLbl.Parent=hdr
local bx=680-52
local clsBtn=hB(bx,"‚ùå",th.closeBtn) local mdlBtn=hB(bx-48,"ü§ñ",th.headerBtn) local minBtn=hB(bx-96,"‚Äî",th.headerBtn) local settBtn=hB(bx-144,"‚öô",th.headerBtn) local expBtn=hB(bx-96,"+",th.headerBtn) expBtn.Visible=false
addH(histBtn,th.accent,th.hover) addH(settBtn,th.headerBtn,th.accent) addH(minBtn,th.headerBtn,th.accent) addH(expBtn,th.headerBtn,th.accent) addH(mdlBtn,th.headerBtn,th.accent) addH(clsBtn,th.closeBtn,Color3.fromRGB(255,120,120))
local sB=Instance.new("Frame") sB.Size=UDim2.new(1,-30,0,34) sB.Position=UDim2.new(0,15,0,64) sB.BackgroundColor3=th.status sB.BorderSizePixel=0 sB.Parent=mf mkC(sB,10)
local sD=Instance.new("Frame") sD.Size=UDim2.new(0,8,0,8) sD.Position=UDim2.new(0,12,0.5,-4) sD.BackgroundColor3=Color3.fromRGB(87,242,135) sD.BorderSizePixel=0 sD.Parent=sB mkC(sD,100)
local sL=Instance.new("TextLabel") sL.Size=UDim2.new(1,-30,1,0) sL.Position=UDim2.new(0,26,0,0) sL.BackgroundTransparency=1 sL.Text=tx("status",MODELS[currentModelIndex].name) sL.TextColor3=Color3.fromRGB(87,242,135) sL.TextSize=13 sL.Font=Enum.Font.GothamBold sL.TextXAlignment=Enum.TextXAlignment.Left sL.Parent=sB statusLabelRef=sL
local cf=Instance.new("ScrollingFrame") cf.Name="Chat" cf.Size=UDim2.new(1,-30,1,-220) cf.Position=UDim2.new(0,15,0,104) cf.BackgroundColor3=th.chat cf.BorderSizePixel=0 cf.ScrollBarThickness=8 cf.ScrollBarImageColor3=th.accent cf.CanvasSize=UDim2.new(0,0,0,0) cf.AutomaticCanvasSize=Enum.AutomaticSize.Y cf.Parent=mf chatFrameRef=cf mkC(cf,15)
local cfL=Instance.new("UIListLayout") cfL.Padding=UDim.new(0,10) cfL.SortOrder=Enum.SortOrder.LayoutOrder cfL.Parent=cf
local cfP=Instance.new("UIPadding") cfP.PaddingTop=UDim.new(0,12) cfP.PaddingBottom=UDim.new(0,12) cfP.PaddingLeft=UDim.new(0,12) cfP.PaddingRight=UDim.new(0,12) cfP.Parent=cf
local sdB=Instance.new("TextButton") sdB.Size=UDim2.new(0,40,0,40) sdB.Position=UDim2.new(1,-62,1,-178) sdB.BackgroundColor3=th.accent sdB.BackgroundTransparency=0.15 sdB.BorderSizePixel=0 sdB.Text="‚ñº" sdB.TextColor3=Color3.fromRGB(255,255,255) sdB.TextSize=16 sdB.Font=Enum.Font.GothamBold sdB.ZIndex=10 sdB.Parent=mf mkC(sdB,100) sdB.MouseButton1Click:Connect(function() if chatFrameRef then chatFrameRef.CanvasPosition=Vector2.new(0,chatFrameRef.AbsoluteCanvasSize.Y) end end) addH(sdB,th.accent,th.hover)
local inF=Instance.new("Frame") inF.Size=UDim2.new(1,-30,0,70) inF.Position=UDim2.new(0,15,1,-100) inF.BackgroundColor3=th.input inF.BorderSizePixel=0 inF.Parent=mf mkC(inF,15) mkS(inF,th.accent)
local inB=Instance.new("TextBox") inB.Size=UDim2.new(1,-75,1,-14) inB.Position=UDim2.new(0,14,0,7) inB.BackgroundTransparency=1 inB.Text="" inB.PlaceholderText=tx("placeholder") inB.TextColor3=th.text inB.PlaceholderColor3=th.subtext inB.TextSize=15 inB.Font=Enum.Font.Gotham inB.TextWrapped=true inB.TextXAlignment=Enum.TextXAlignment.Left inB.TextYAlignment=Enum.TextYAlignment.Top inB.ClearTextOnFocus=false inB.MultiLine=true inB.Parent=inF inputBoxRef=inB
local snB=Instance.new("TextButton") snB.Size=UDim2.new(0,50,0,50) snB.Position=UDim2.new(1,-60,0.5,-25) snB.BackgroundColor3=th.accent snB.BorderSizePixel=0 snB.Text="‚Üí" snB.TextColor3=Color3.fromRGB(255,255,255) snB.TextSize=26 snB.Font=Enum.Font.GothamBold snB.Parent=inF mkC(snB,14) addH(snB,th.accent,th.hover)
local byL=Instance.new("TextLabel") byL.Size=UDim2.new(1,0,0,20) byL.Position=UDim2.new(0,0,1,-24) byL.BackgroundTransparency=1 byL.Text="by:romokaso" byL.TextColor3=th.subtext byL.TextSize=11 byL.Font=Enum.Font.GothamBold byL.Parent=mf
local mS=Instance.new("Frame") mS.Size=UDim2.new(0,260,0,400) mS.Position=UDim2.new(1,-290,0,62) mS.BackgroundColor3=th.chat mS.BorderSizePixel=0 mS.Visible=false mS.ZIndex=100 mS.Parent=mf mkC(mS,15) mkS(mS,th.accent)
local mTi=Instance.new("TextLabel") mTi.Size=UDim2.new(1,-10,0,35) mTi.Position=UDim2.new(0,5,0,2) mTi.BackgroundTransparency=1 mTi.Text=tx("modelSelect") mTi.TextColor3=th.text mTi.TextSize=14 mTi.Font=Enum.Font.GothamBold mTi.ZIndex=101 mTi.Parent=mS
local mSc=Instance.new("ScrollingFrame") mSc.Size=UDim2.new(1,-10,1,-40) mSc.Position=UDim2.new(0,5,0,38) mSc.BackgroundTransparency=1 mSc.BorderSizePixel=0 mSc.ScrollBarThickness=5 mSc.ScrollBarImageColor3=th.accent mSc.AutomaticCanvasSize=Enum.AutomaticSize.Y mSc.Parent=mS
local mL=Instance.new("UIListLayout") mL.Padding=UDim.new(0,3) mL.SortOrder=Enum.SortOrder.LayoutOrder mL.Parent=mSc
for mi=1,#MODELS do local m=MODELS[mi] local mO=Instance.new("TextButton") mO.Size=UDim2.new(1,-4,0,33) mO.BackgroundColor3=mi==currentModelIndex and th.accent or th.button mO.BorderSizePixel=0 mO.Text=m.name mO.TextColor3=Color3.fromRGB(255,255,255) mO.TextSize=12 mO.Font=Enum.Font.GothamBold mO.ZIndex=101 mO.Parent=mSc mkC(mO,10) local ci=mi mO.MouseButton1Click:Connect(function() currentModelIndex=ci sL.Text=tx("status",MODELS[ci].name) for _,v in ipairs(mSc:GetChildren()) do if v:IsA("TextButton") then v.BackgroundColor3=gt().button end end mO.BackgroundColor3=gt().accent mS.Visible=false saveData() end) end
mdlBtn.MouseButton1Click:Connect(function() if isMinimized or isSettingsOpen or isHistoryOpen then return end mS.Visible=not mS.Visible end)
local function mkOv(z) local o=Instance.new("Frame") o.Size=UDim2.new(1,0,1,0) o.BackgroundColor3=th.main o.BorderSizePixel=0 o.Visible=false o.ZIndex=z o.Parent=mf mkC(o,20) return o end
local confOv=Instance.new("Frame") confOv.Size=UDim2.new(1,0,1,0) confOv.BackgroundColor3=th.main confOv.BackgroundTransparency=0 confOv.BorderSizePixel=0 confOv.Visible=false confOv.ZIndex=200 confOv.Active=true confOv.Parent=mf mkC(confOv,20)
local confCard=Instance.new("Frame") confCard.Size=UDim2.new(0,400,0,0) confCard.AutomaticSize=Enum.AutomaticSize.Y confCard.Position=UDim2.new(0.5,-200,0.5,0) confCard.AnchorPoint=Vector2.new(0,0.5) confCard.BackgroundColor3=th.header confCard.BorderSizePixel=0 confCard.ZIndex=201 confCard.Parent=confOv mkC(confCard,20) mkS(confCard,th.accent)
local confCardPad=Instance.new("UIPadding") confCardPad.PaddingTop=UDim.new(0,25) confCardPad.PaddingBottom=UDim.new(0,25) confCardPad.PaddingLeft=UDim.new(0,25) confCardPad.PaddingRight=UDim.new(0,25) confCardPad.Parent=confCard
local confLy=Instance.new("UIListLayout") confLy.Padding=UDim.new(0,15) confLy.SortOrder=Enum.SortOrder.LayoutOrder confLy.HorizontalAlignment=Enum.HorizontalAlignment.Center confLy.Parent=confCard
local confT=Instance.new("TextLabel") confT.Size=UDim2.new(1,0,0,60) confT.BackgroundTransparency=1 confT.Text=tx("closeConfirm") confT.TextColor3=th.text confT.TextSize=22 confT.Font=Enum.Font.GothamBold confT.TextWrapped=true confT.ZIndex=202 confT.LayoutOrder=1 confT.Parent=confCard
local confBR=Instance.new("Frame") confBR.Size=UDim2.new(1,0,0,55) confBR.BackgroundTransparency=1 confBR.ZIndex=202 confBR.LayoutOrder=2 confBR.Parent=confCard
local yB=Instance.new("TextButton") yB.Size=UDim2.new(0.48,0,1,0) yB.BackgroundColor3=th.success yB.BorderSizePixel=0 yB.Text=tx("yes") yB.TextColor3=Color3.fromRGB(255,255,255) yB.TextSize=20 yB.Font=Enum.Font.GothamBold yB.ZIndex=203 yB.Parent=confBR mkC(yB,12) addH(yB,th.success,Color3.fromRGB(100,255,150))
local nB=Instance.new("TextButton") nB.Size=UDim2.new(0.48,0,1,0) nB.Position=UDim2.new(0.52,0,0,0) nB.BackgroundColor3=th.danger nB.BorderSizePixel=0 nB.Text=tx("no") nB.TextColor3=Color3.fromRGB(255,255,255) nB.TextSize=20 nB.Font=Enum.Font.GothamBold nB.ZIndex=203 nB.Parent=confBR mkC(nB,12) addH(nB,th.danger,Color3.fromRGB(255,80,80))
local settFr=mkOv(50) settFr.Position=UDim2.new(1,0,0,0)
local sBk=Instance.new("TextButton") sBk.Size=UDim2.new(0,45,0,45) sBk.Position=UDim2.new(1,-55,0,10) sBk.BackgroundColor3=th.accent sBk.BorderSizePixel=0 sBk.Text="‚Üê" sBk.TextColor3=Color3.fromRGB(255,255,255) sBk.TextSize=22 sBk.Font=Enum.Font.GothamBold sBk.ZIndex=51 sBk.Parent=settFr mkC(sBk,12) addH(sBk,th.accent,th.hover)
local sSc=Instance.new("ScrollingFrame") sSc.Size=UDim2.new(1,0,1,-65) sSc.Position=UDim2.new(0,0,0,65) sSc.BackgroundTransparency=1 sSc.BorderSizePixel=0 sSc.ScrollBarThickness=6 sSc.ScrollBarImageColor3=th.accent sSc.AutomaticCanvasSize=Enum.AutomaticSize.Y sSc.ZIndex=51 sSc.Parent=settFr
local sLy=Instance.new("UIListLayout") sLy.Padding=UDim.new(0,12) sLy.SortOrder=Enum.SortOrder.LayoutOrder sLy.Parent=sSc
local sPd=Instance.new("UIPadding") sPd.PaddingTop=UDim.new(0,15) sPd.PaddingBottom=UDim.new(0,15) sPd.PaddingLeft=UDim.new(0,18) sPd.PaddingRight=UDim.new(0,18) sPd.Parent=sSc
local sTtl=Instance.new("TextLabel") sTtl.Size=UDim2.new(1,0,0,40) sTtl.BackgroundTransparency=1 sTtl.Text=tx("settings") sTtl.TextColor3=th.text sTtl.TextSize=24 sTtl.Font=Enum.Font.GothamBold sTtl.TextXAlignment=Enum.TextXAlignment.Left sTtl.ZIndex=52 sTtl.LayoutOrder=1 sTtl.Parent=sSc
local thL=Instance.new("TextLabel") thL.Size=UDim2.new(1,0,0,25) thL.BackgroundTransparency=1 thL.Text=tx("theme") thL.TextColor3=th.text thL.TextSize=17 thL.Font=Enum.Font.GothamBold thL.TextXAlignment=Enum.TextXAlignment.Left thL.ZIndex=52 thL.LayoutOrder=2 thL.Parent=sSc
local thR=Instance.new("Frame") thR.Size=UDim2.new(1,0,0,45) thR.BackgroundColor3=th.chat thR.BorderSizePixel=0 thR.ZIndex=52 thR.LayoutOrder=3 thR.Parent=sSc mkC(thR,12)
local dkB=Instance.new("TextButton") dkB.Size=UDim2.new(0.5,-5,1,-8) dkB.Position=UDim2.new(0,4,0,4) dkB.BackgroundColor3=currentTheme=="dark" and th.accent or th.button dkB.BorderSizePixel=0 dkB.Text=tx("dark") dkB.TextColor3=Color3.fromRGB(255,255,255) dkB.TextSize=15 dkB.Font=Enum.Font.GothamBold dkB.ZIndex=53 dkB.Parent=thR mkC(dkB,10)
local lgB=Instance.new("TextButton") lgB.Size=UDim2.new(0.5,-5,1,-8) lgB.Position=UDim2.new(0.5,1,0,4) lgB.BackgroundColor3=currentTheme=="light" and th.accent or th.button lgB.BorderSizePixel=0 lgB.Text=tx("light") lgB.TextColor3=Color3.fromRGB(255,255,255) lgB.TextSize=15 lgB.Font=Enum.Font.GothamBold lgB.ZIndex=53 lgB.Parent=thR mkC(lgB,10)
local lnL=Instance.new("TextLabel") lnL.Size=UDim2.new(1,0,0,25) lnL.BackgroundTransparency=1 lnL.Text=tx("language") lnL.TextColor3=th.text lnL.TextSize=17 lnL.Font=Enum.Font.GothamBold lnL.TextXAlignment=Enum.TextXAlignment.Left lnL.ZIndex=52 lnL.LayoutOrder=4 lnL.Parent=sSc
local function gLN() for _,l in ipairs(LANGUAGES) do if l.code==currentLanguage then return l.name end end return "English" end
local lnB=Instance.new("TextButton") lnB.Size=UDim2.new(1,0,0,45) lnB.BackgroundColor3=th.chat lnB.BorderSizePixel=0 lnB.Text=gLN().." ‚ñº" lnB.TextColor3=th.text lnB.TextSize=16 lnB.Font=Enum.Font.GothamBold lnB.ZIndex=53 lnB.LayoutOrder=5 lnB.Parent=sSc mkC(lnB,12)
local lnD=Instance.new("Frame") lnD.Size=UDim2.new(1,0,0,0) lnD.BackgroundColor3=th.chat lnD.BorderSizePixel=0 lnD.ClipsDescendants=true lnD.ZIndex=54 lnD.LayoutOrder=6 lnD.Parent=sSc mkC(lnD,12)
local ldLy=Instance.new("UIListLayout") ldLy.Padding=UDim.new(0,3) ldLy.SortOrder=Enum.SortOrder.LayoutOrder ldLy.Parent=lnD
local ldPd=Instance.new("UIPadding") ldPd.PaddingTop=UDim.new(0,5) ldPd.PaddingBottom=UDim.new(0,5) ldPd.PaddingLeft=UDim.new(0,5) ldPd.PaddingRight=UDim.new(0,5) ldPd.Parent=lnD
local lnO=false
local akL=Instance.new("TextLabel") akL.Size=UDim2.new(1,0,0,25) akL.BackgroundTransparency=1 akL.Text=tx("apiKeys") akL.TextColor3=th.text akL.TextSize=17 akL.Font=Enum.Font.GothamBold akL.TextXAlignment=Enum.TextXAlignment.Left akL.ZIndex=52 akL.LayoutOrder=7 akL.Parent=sSc
local akC=Instance.new("TextLabel") akC.Size=UDim2.new(1,0,0,35) akC.BackgroundColor3=th.chat akC.BorderSizePixel=0 akC.ZIndex=52 akC.LayoutOrder=8 akC.Parent=sSc mkC(akC,10)
local akCL=Instance.new("TextLabel") akCL.Size=UDim2.new(1,-16,1,0) akCL.Position=UDim2.new(0,8,0,0) akCL.BackgroundTransparency=1 akCL.Text=tx("currentKey")..": "..maskK(GEMINI_API_KEY) akCL.TextColor3=th.subtext akCL.TextSize=13 akCL.Font=Enum.Font.Gotham akCL.TextXAlignment=Enum.TextXAlignment.Left akCL.TextTruncate=Enum.TextTruncate.AtEnd akCL.ZIndex=53 akCL.Parent=akC
local akF=Instance.new("Frame") akF.Size=UDim2.new(1,0,0,0) akF.AutomaticSize=Enum.AutomaticSize.Y akF.BackgroundTransparency=1 akF.ZIndex=52 akF.LayoutOrder=9 akF.Parent=sSc
local akFL=Instance.new("UIListLayout") akFL.Padding=UDim.new(0,4) akFL.SortOrder=Enum.SortOrder.LayoutOrder akFL.Parent=akF
local function refAK() for _,ch in ipairs(akF:GetChildren()) do if ch:IsA("Frame") then ch:Destroy() end end for ki=1,#allApiKeys do local key=allApiKeys[ki] local iC=key==GEMINI_API_KEY local rw=Instance.new("Frame") rw.Size=UDim2.new(1,0,0,38) rw.BackgroundColor3=th.button rw.BorderSizePixel=0 rw.LayoutOrder=ki rw.ZIndex=53 rw.Parent=akF mkC(rw,8) local kLb=Instance.new("TextButton") kLb.Size=UDim2.new(1,-85,1,0) kLb.Position=UDim2.new(0,10,0,0) kLb.BackgroundTransparency=1 kLb.Text=(iC and "‚ñ∂ " or "")..maskK(key) kLb.TextColor3=iC and th.success or th.text kLb.TextSize=12 kLb.Font=Enum.Font.Gotham kLb.TextXAlignment=Enum.TextXAlignment.Left kLb.TextTruncate=Enum.TextTruncate.AtEnd kLb.ZIndex=54 kLb.Parent=rw kLb.MouseButton1Click:Connect(function() GEMINI_API_KEY=key savedApiKey=key akCL.Text=tx("currentKey")..": "..maskK(key) saveData() refAK() end) local dBt=Instance.new("TextButton") dBt.Size=UDim2.new(0,32,0,28) dBt.Position=UDim2.new(1,-42,0.5,-14) dBt.BackgroundColor3=th.danger dBt.BorderSizePixel=0 dBt.Text="üóë" dBt.TextColor3=Color3.fromRGB(255,255,255) dBt.TextSize=14 dBt.Font=Enum.Font.GothamBold dBt.ZIndex=54 dBt.Parent=rw mkC(dBt,6) dBt.MouseButton1Click:Connect(function() for di=#allApiKeys,1,-1 do if allApiKeys[di]==key then table.remove(allApiKeys,di) break end end if GEMINI_API_KEY==key then GEMINI_API_KEY=#allApiKeys>0 and allApiKeys[1] or "" savedApiKey=GEMINI_API_KEY end akCL.Text=tx("currentKey")..": "..maskK(GEMINI_API_KEY) saveData() refAK() end) end end
refAK()
local chgB=Instance.new("TextButton") chgB.Size=UDim2.new(1,0,0,42) chgB.BackgroundColor3=th.accent chgB.BorderSizePixel=0 chgB.Text=tx("changeKey") chgB.TextColor3=Color3.fromRGB(255,255,255) chgB.TextSize=15 chgB.Font=Enum.Font.GothamBold chgB.ZIndex=53 chgB.LayoutOrder=10 chgB.Parent=sSc mkC(chgB,12) addH(chgB,th.accent,th.hover)
local addKB=Instance.new("TextButton") addKB.Size=UDim2.new(1,0,0,42) addKB.BackgroundColor3=th.success addKB.BorderSizePixel=0 addKB.Text=tx("addKey") addKB.TextColor3=Color3.fromRGB(255,255,255) addKB.TextSize=15 addKB.Font=Enum.Font.GothamBold addKB.ZIndex=53 addKB.LayoutOrder=11 addKB.Parent=sSc mkC(addKB,12) addH(addKB,th.success,Color3.fromRGB(100,255,150))
local hTt,nCB
local function upTx() titleLbl.Text=tx("title") sL.Text=tx("status",MODELS[currentModelIndex].name) inB.PlaceholderText=tx("placeholder") sTtl.Text=tx("settings") thL.Text=tx("theme") dkB.Text=tx("dark") lgB.Text=tx("light") lnL.Text=tx("language") confT.Text=tx("closeConfirm") yB.Text=tx("yes") nB.Text=tx("no") byL.Text="by:romokaso" mTi.Text=tx("modelSelect") akL.Text=tx("apiKeys") akCL.Text=tx("currentKey")..": "..maskK(GEMINI_API_KEY) chgB.Text=tx("changeKey") addKB.Text=tx("addKey") if hTt then hTt.Text=tx("history") end if nCB then nCB.Text=tx("newChat") end end
for li=1,#LANGUAGES do local lang=LANGUAGES[li] local lb=Instance.new("TextButton") lb.Size=UDim2.new(1,-10,0,36) lb.BackgroundColor3=lang.code==currentLanguage and th.accent or th.button lb.BorderSizePixel=0 lb.Text=lang.name lb.TextColor3=Color3.fromRGB(255,255,255) lb.TextSize=14 lb.Font=Enum.Font.GothamBold lb.ZIndex=55 lb.Parent=lnD mkC(lb,8) lb.MouseButton1Click:Connect(function() currentLanguage=lang.code lnB.Text=lang.name.." ‚ñº" lnO=false TweenService:Create(lnD,TweenInfo.new(0.2),{Size=UDim2.new(1,0,0,0)}):Play() for _,ch in ipairs(lnD:GetChildren()) do if ch:IsA("TextButton") then ch.BackgroundColor3=gt().button end end lb.BackgroundColor3=gt().accent upTx() saveData() end) end
lnB.MouseButton1Click:Connect(function() lnO=not lnO TweenService:Create(lnD,TweenInfo.new(0.2),{Size=UDim2.new(1,0,0,lnO and (#LANGUAGES*39+10) or 0)}):Play() end)
chgB.MouseButton1Click:Connect(function() saveChatToHistory() mf:Destroy() chatFrameRef=nil statusLabelRef=nil inputBoxRef=nil mainFrameRef=nil isSettingsOpen=false isHistoryOpen=false isMinimized=false isMainGuiLaunched=false toggleBtn.Visible=false isOpen=false TweenService:Create(toggleBtn,TweenInfo.new(0.3),{Rotation=0}):Play() buildApiKeyGui() end)
local addKOv=Instance.new("Frame") addKOv.Size=UDim2.new(1,0,1,0) addKOv.BackgroundColor3=th.main addKOv.BackgroundTransparency=0 addKOv.BorderSizePixel=0 addKOv.Visible=false addKOv.ZIndex=150 addKOv.Active=true addKOv.Parent=mf mkC(addKOv,20)
local addKCard=Instance.new("Frame") addKCard.Size=UDim2.new(0,400,0,0) addKCard.AutomaticSize=Enum.AutomaticSize.Y addKCard.Position=UDim2.new(0.5,-200,0.5,0) addKCard.AnchorPoint=Vector2.new(0,0.5) addKCard.BackgroundColor3=th.header addKCard.BorderSizePixel=0 addKCard.ZIndex=151 addKCard.Parent=addKOv mkC(addKCard,20) mkS(addKCard,th.accent)
local addKCardPad=Instance.new("UIPadding") addKCardPad.PaddingTop=UDim.new(0,20) addKCardPad.PaddingBottom=UDim.new(0,20) addKCardPad.PaddingLeft=UDim.new(0,20) addKCardPad.PaddingRight=UDim.new(0,20) addKCardPad.Parent=addKCard
local addKLy=Instance.new("UIListLayout") addKLy.Padding=UDim.new(0,12) addKLy.SortOrder=Enum.SortOrder.LayoutOrder addKLy.HorizontalAlignment=Enum.HorizontalAlignment.Center addKLy.Parent=addKCard
local addKTt=Instance.new("TextLabel") addKTt.Size=UDim2.new(1,0,0,35) addKTt.BackgroundTransparency=1 addKTt.Text=tx("addApiKey") addKTt.TextColor3=th.text addKTt.TextSize=20 addKTt.Font=Enum.Font.GothamBold addKTt.ZIndex=152 addKTt.LayoutOrder=1 addKTt.Parent=addKCard
local addKIF=Instance.new("Frame") addKIF.Size=UDim2.new(1,0,0,48) addKIF.BackgroundColor3=th.input addKIF.BorderSizePixel=0 addKIF.ZIndex=152 addKIF.LayoutOrder=2 addKIF.Parent=addKCard mkC(addKIF,12) mkS(addKIF,th.accent)
local addKI=Instance.new("TextBox") addKI.Size=UDim2.new(1,-24,1,0) addKI.Position=UDim2.new(0,12,0,0) addKI.BackgroundTransparency=1 addKI.Text="" addKI.PlaceholderText=tx("enterApiKey") addKI.TextColor3=th.text addKI.PlaceholderColor3=th.subtext addKI.TextSize=14 addKI.Font=Enum.Font.Gotham addKI.ClearTextOnFocus=false addKI.ZIndex=153 addKI.Parent=addKIF
local addKSt=Instance.new("TextLabel") addKSt.Size=UDim2.new(1,0,0,22) addKSt.BackgroundTransparency=1 addKSt.Text="" addKSt.TextSize=13 addKSt.Font=Enum.Font.Gotham addKSt.ZIndex=152 addKSt.LayoutOrder=3 addKSt.Parent=addKCard
local addKBR=Instance.new("Frame") addKBR.Size=UDim2.new(1,0,0,45) addKBR.BackgroundTransparency=1 addKBR.ZIndex=152 addKBR.LayoutOrder=4 addKBR.Parent=addKCard
local addKCf=Instance.new("TextButton") addKCf.Size=UDim2.new(0.48,0,1,0) addKCf.BackgroundColor3=th.accent addKCf.BorderSizePixel=0 addKCf.Text=tx("confirm") addKCf.TextColor3=Color3.fromRGB(255,255,255) addKCf.TextSize=16 addKCf.Font=Enum.Font.GothamBold addKCf.ZIndex=153 addKCf.Parent=addKBR mkC(addKCf,12)
local addKCn=Instance.new("TextButton") addKCn.Size=UDim2.new(0.48,0,1,0) addKCn.Position=UDim2.new(0.52,0,0,0) addKCn.BackgroundColor3=th.danger addKCn.BorderSizePixel=0 addKCn.Text=tx("no") addKCn.TextColor3=Color3.fromRGB(255,255,255) addKCn.TextSize=16 addKCn.Font=Enum.Font.GothamBold addKCn.ZIndex=153 addKCn.Parent=addKBR mkC(addKCn,12)
addKCn.MouseButton1Click:Connect(function() addKOv.Visible=false end)

local function doAddKeyConfirm()
local key=addKI.Text:gsub("%s+","")
if key=="" then addKSt.Text=tx("apiKeyInvalid") addKSt.TextColor3=th.danger return end
addKSt.Text=tx("checking") addKSt.TextColor3=Color3.fromRGB(255,200,50) addKCf.Text="..."
verifyApiKey(key,function(valid) if valid then local f=false for i=1,#allApiKeys do if allApiKeys[i]==key then f=true break end end if not f then allApiKeys[#allApiKeys+1]=key end GEMINI_API_KEY=key savedApiKey=key akCL.Text=tx("currentKey")..": "..maskK(key) saveData() refAK() addKOv.Visible=false addKI.Text="" addKSt.Text="" addKCf.Text=tx("confirm") else addKSt.Text=tx("apiKeyInvalid") addKSt.TextColor3=th.danger addKCf.Text=tx("confirm") end end)
end

addKCf.MouseButton1Click:Connect(doAddKeyConfirm)
addKI.FocusLost:Connect(function(ep) if ep then doAddKeyConfirm() end end)

addKB.MouseButton1Click:Connect(function() addKOv.Visible=true addKI.Text="" addKSt.Text="" end)
dkB.MouseButton1Click:Connect(function() currentTheme="dark" saveData() saveChatToHistory() mf:Destroy() chatFrameRef=nil statusLabelRef=nil inputBoxRef=nil mainFrameRef=nil isSettingsOpen=false isHistoryOpen=false isMinimized=false launchMainGui() end)
lgB.MouseButton1Click:Connect(function() currentTheme="light" saveData() saveChatToHistory() mf:Destroy() chatFrameRef=nil statusLabelRef=nil inputBoxRef=nil mainFrameRef=nil isSettingsOpen=false isHistoryOpen=false isMinimized=false launchMainGui() end)
local histFr=mkOv(50) histFr.Position=UDim2.new(-1,0,0,0)
local hBk=Instance.new("TextButton") hBk.Size=UDim2.new(0,45,0,45) hBk.Position=UDim2.new(1,-55,0,10) hBk.BackgroundColor3=th.accent hBk.BorderSizePixel=0 hBk.Text="‚Üê" hBk.TextColor3=Color3.fromRGB(255,255,255) hBk.TextSize=22 hBk.Font=Enum.Font.GothamBold hBk.ZIndex=51 hBk.Parent=histFr mkC(hBk,12) addH(hBk,th.accent,th.hover)
hTt=Instance.new("TextLabel") hTt.Size=UDim2.new(1,-80,0,50) hTt.Position=UDim2.new(0,15,0,8) hTt.BackgroundTransparency=1 hTt.Text=tx("history") hTt.TextColor3=th.text hTt.TextSize=20 hTt.Font=Enum.Font.GothamBold hTt.TextXAlignment=Enum.TextXAlignment.Left hTt.ZIndex=51 hTt.Parent=histFr
nCB=Instance.new("TextButton") nCB.Size=UDim2.new(1,-30,0,48) nCB.Position=UDim2.new(0,15,0,62) nCB.BackgroundColor3=th.accent nCB.BorderSizePixel=0 nCB.Text=tx("newChat") nCB.TextColor3=Color3.fromRGB(255,255,255) nCB.TextSize=16 nCB.Font=Enum.Font.GothamBold nCB.ZIndex=51 nCB.Parent=histFr mkC(nCB,12) addH(nCB,th.accent,th.hover)
local hSc=Instance.new("ScrollingFrame") hSc.Size=UDim2.new(1,-30,1,-130) hSc.Position=UDim2.new(0,15,0,120) hSc.BackgroundTransparency=1 hSc.BorderSizePixel=0 hSc.ScrollBarThickness=6 hSc.ScrollBarImageColor3=th.accent hSc.AutomaticCanvasSize=Enum.AutomaticSize.Y hSc.ZIndex=51 hSc.Parent=histFr
local hLy=Instance.new("UIListLayout") hLy.Padding=UDim.new(0,6) hLy.SortOrder=Enum.SortOrder.LayoutOrder hLy.Parent=hSc
local renOv=Instance.new("Frame") renOv.Size=UDim2.new(1,0,1,0) renOv.BackgroundColor3=th.main renOv.BackgroundTransparency=0 renOv.BorderSizePixel=0 renOv.Visible=false renOv.ZIndex=300 renOv.Active=true renOv.Parent=mf mkC(renOv,20)
local renCard=Instance.new("Frame") renCard.Size=UDim2.new(0,400,0,0) renCard.AutomaticSize=Enum.AutomaticSize.Y renCard.Position=UDim2.new(0.5,-200,0.5,0) renCard.AnchorPoint=Vector2.new(0,0.5) renCard.BackgroundColor3=th.header renCard.BorderSizePixel=0 renCard.ZIndex=301 renCard.Parent=renOv mkC(renCard,20) mkS(renCard,th.accent)
local renCardPad=Instance.new("UIPadding") renCardPad.PaddingTop=UDim.new(0,20) renCardPad.PaddingBottom=UDim.new(0,20) renCardPad.PaddingLeft=UDim.new(0,20) renCardPad.PaddingRight=UDim.new(0,20) renCardPad.Parent=renCard
local renLy=Instance.new("UIListLayout") renLy.Padding=UDim.new(0,12) renLy.SortOrder=Enum.SortOrder.LayoutOrder renLy.HorizontalAlignment=Enum.HorizontalAlignment.Center renLy.Parent=renCard
local renTt=Instance.new("TextLabel") renTt.Size=UDim2.new(1,0,0,35) renTt.BackgroundTransparency=1 renTt.Text=tx("rename") renTt.TextColor3=th.text renTt.TextSize=20 renTt.Font=Enum.Font.GothamBold renTt.ZIndex=302 renTt.LayoutOrder=1 renTt.Parent=renCard
local renIF=Instance.new("Frame") renIF.Size=UDim2.new(1,0,0,45) renIF.BackgroundColor3=th.input renIF.BorderSizePixel=0 renIF.ZIndex=302 renIF.LayoutOrder=2 renIF.Parent=renCard mkC(renIF,10)
local renI=Instance.new("TextBox") renI.Size=UDim2.new(1,-16,1,0) renI.Position=UDim2.new(0,8,0,0) renI.BackgroundTransparency=1 renI.Text="" renI.PlaceholderText=tx("renamePlace") renI.TextColor3=th.text renI.PlaceholderColor3=th.subtext renI.TextSize=15 renI.Font=Enum.Font.Gotham renI.ClearTextOnFocus=false renI.ZIndex=303 renI.Parent=renIF
local renD=Instance.new("TextButton") renD.Size=UDim2.new(1,0,0,42) renD.BackgroundColor3=th.accent renD.BorderSizePixel=0 renD.Text=tx("renameDone") renD.TextColor3=Color3.fromRGB(255,255,255) renD.TextSize=16 renD.Font=Enum.Font.GothamBold renD.ZIndex=302 renD.LayoutOrder=3 renD.Parent=renCard mkC(renD,12)
local renamingId=nil
local function refHist() for _,ch in ipairs(hSc:GetChildren()) do if ch:IsA("Frame") or ch:IsA("TextLabel") then ch:Destroy() end end if #chatHistory==0 then local n=Instance.new("TextLabel") n.Size=UDim2.new(1,0,0,50) n.BackgroundTransparency=1 n.Text=tx("noHistory") n.TextColor3=th.subtext n.TextSize=15 n.Font=Enum.Font.Gotham n.ZIndex=52 n.Parent=hSc return end for hi=#chatHistory,1,-1 do local chat=chatHistory[hi] local it=Instance.new("Frame") it.Size=UDim2.new(1,0,0,52) it.BackgroundColor3=currentChatId==chat.id and th.accent or th.button it.BorderSizePixel=0 it.ZIndex=52 it.Parent=hSc mkC(it,10) local nB2=Instance.new("TextButton") nB2.Size=UDim2.new(1,-100,1,0) nB2.Position=UDim2.new(0,12,0,0) nB2.BackgroundTransparency=1 nB2.Text="üí¨ "..chat.name nB2.TextColor3=Color3.fromRGB(255,255,255) nB2.TextSize=13 nB2.Font=Enum.Font.GothamBold nB2.TextXAlignment=Enum.TextXAlignment.Left nB2.TextTruncate=Enum.TextTruncate.AtEnd nB2.ZIndex=53 nB2.Parent=it local eB=Instance.new("TextButton") eB.Size=UDim2.new(0,34,0,34) eB.Position=UDim2.new(1,-82,0.5,-17) eB.BackgroundColor3=th.accent eB.BorderSizePixel=0 eB.Text="‚úè" eB.TextColor3=Color3.fromRGB(255,255,255) eB.TextSize=14 eB.Font=Enum.Font.GothamBold eB.ZIndex=53 eB.Parent=it mkC(eB,8) local dB2=Instance.new("TextButton") dB2.Size=UDim2.new(0,34,0,34) dB2.Position=UDim2.new(1,-42,0.5,-17) dB2.BackgroundColor3=th.danger dB2.BorderSizePixel=0 dB2.Text="üóë" dB2.TextColor3=Color3.fromRGB(255,255,255) dB2.TextSize=14 dB2.Font=Enum.Font.GothamBold dB2.ZIndex=53 dB2.Parent=it mkC(dB2,8) local cc=chat nB2.MouseButton1Click:Connect(function() currentChatId=cc.id currentChatMessages=cc.messages clearChat() for m2=1,#cc.messages do createMessage(cc.messages[m2].text,cc.messages[m2].isUser) end isHistoryOpen=false TweenService:Create(histFr,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Position=UDim2.new(-1,0,0,0)}):Play() task.delay(0.3,function() histFr.Visible=false end) saveData() end) eB.MouseButton1Click:Connect(function() renamingId=cc.id renI.Text=cc.name renOv.Visible=true end) dB2.MouseButton1Click:Connect(function() for di=1,#chatHistory do if chatHistory[di].id==cc.id then table.remove(chatHistory,di) break end end if currentChatId==cc.id then currentChatId=nil currentChatMessages={} clearChat() createMessage(tx("welcome",MODELS[currentModelIndex].name),false) end saveData() refHist() end) end end

local function doRename()
if renamingId and renI.Text~="" then for i=1,#chatHistory do if chatHistory[i].id==renamingId then chatHistory[i].name=renI.Text break end end saveData() refHist() end renOv.Visible=false renamingId=nil
end

renD.MouseButton1Click:Connect(doRename)
renI.FocusLost:Connect(function(ep) if ep then doRename() end end)

local function togMin() if isSettingsOpen or isHistoryOpen then return end isMinimized=not isMinimized if isMinimized then minBtn.Visible=false expBtn.Visible=true mS.Visible=false TweenService:Create(mf,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Size=UDim2.new(0,680,0,88)}):Play() task.delay(0.1,function() sB.Visible=false cf.Visible=false inF.Visible=false sdB.Visible=false end) byL.Position=UDim2.new(0,0,1,-22) else expBtn.Visible=false minBtn.Visible=true sB.Visible=true cf.Visible=true inF.Visible=true sdB.Visible=true byL.Position=UDim2.new(0,0,1,-24) TweenService:Create(mf,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Size=UDim2.new(0,680,0,700)}):Play() end end
local function togSett() if isMinimized then togMin() task.wait(0.3) end if isHistoryOpen then return end isSettingsOpen=not isSettingsOpen mS.Visible=false if isSettingsOpen then settFr.Visible=true TweenService:Create(settFr,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Position=UDim2.new(0,0,0,0)}):Play() else TweenService:Create(settFr,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Position=UDim2.new(1,0,0,0)}):Play() task.delay(0.3,function() settFr.Visible=false end) end end
local function togHist() if isMinimized then togMin() task.wait(0.3) end if isSettingsOpen then return end isHistoryOpen=not isHistoryOpen mS.Visible=false if isHistoryOpen then refHist() histFr.Visible=true TweenService:Create(histFr,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Position=UDim2.new(0,0,0,0)}):Play() else TweenService:Create(histFr,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Position=UDim2.new(-1,0,0,0)}):Play() task.delay(0.3,function() histFr.Visible=false end) end end
histBtn.MouseButton1Click:Connect(togHist) hBk.MouseButton1Click:Connect(togHist)
nCB.MouseButton1Click:Connect(function() startNewChat() isHistoryOpen=false TweenService:Create(histFr,TweenInfo.new(0.3,Enum.EasingStyle.Quart),{Position=UDim2.new(-1,0,0,0)}):Play() task.delay(0.3,function() histFr.Visible=false end) end)
settBtn.MouseButton1Click:Connect(togSett) sBk.MouseButton1Click:Connect(togSett) minBtn.MouseButton1Click:Connect(togMin) expBtn.MouseButton1Click:Connect(togMin)
clsBtn.MouseButton1Click:Connect(function() if isMinimized then togMin() task.wait(0.3) end confOv.Visible=true end)
yB.MouseButton1Click:Connect(function() saveChatToHistory() confOv.Visible=false mf.Visible=false isOpen=false isMainGuiLaunched=false contentContainerRef=nil chatFrameRef=nil statusLabelRef=nil inputBoxRef=nil mainFrameRef=nil isSettingsOpen=false isHistoryOpen=false isMinimized=false TweenService:Create(toggleBtn,TweenInfo.new(0.3),{Rotation=0}):Play() mf:Destroy() toggleBtn.Visible=false buildApiKeyGui() if contentContainerRef then contentContainerRef.Visible=false end end)
nB.MouseButton1Click:Connect(function() confOv.Visible=false end)
snB.MouseButton1Click:Connect(function() sendMessage(inB.Text) end)
inB.FocusLost:Connect(function(ep) if ep then sendMessage(inB.Text) end end)
mf.Size=UDim2.new(0,0,0,0) mf.Position=UDim2.new(0.5,0,0.5,0)
TweenService:Create(mf,TweenInfo.new(0.5,Enum.EasingStyle.Back,Enum.EasingDirection.Out),{Size=UDim2.new(0,680,0,700),Position=UDim2.new(0.5,-340,0.5,-350)}):Play()
task.wait(0.55)
local loaded=false
if currentChatId then for i=1,#chatHistory do if chatHistory[i].id==currentChatId then currentChatMessages=chatHistory[i].messages for m2=1,#currentChatMessages do createMessage(currentChatMessages[m2].text,currentChatMessages[m2].isUser) end loaded=true break end end end
if not loaded then startNewChat() end
end

buildApiKeyGui()
if savedApiKey~="" then
apiStatusLbl.Text=tx("checking") apiStatusLbl.TextColor3=Color3.fromRGB(255,200,50) apiInput.Text=savedApiKey
verifyApiKey(savedApiKey,function(valid) if valid then GEMINI_API_KEY=savedApiKey apiStatusLbl.Text=tx("apiKeyValid") apiStatusLbl.TextColor3=gt().success task.wait(0.3) launchMainGui() else apiStatusLbl.Text=tx("apiKeyInvalid") apiStatusLbl.TextColor3=gt().danger end end)
end
